import{j as e}from"./three-vendor-vuFDWkHN-1764062221873.js";import{u as s,r as t}from"./react-vendor-CEWkFM1H-1764062221873.js";import{R as a,P as r,B as l,H as i,S as n,t as c,u as d,T as o,e as x,U as p,V as m}from"./index-CryTgMMa-1764062221873.js";import{u as h,d as u}from"./redux-vendor-2Rs-RM28-1764062221873.js";import{m as j,A as g,z as y}from"./ui-vendor-h6iVw50T-1764062221873.js";import{M as b}from"./MagicalGenie-BHGCsdVY-1764062221873.js";const N=()=>{const N=h(),f=s(),{items:v,loading:k,error:w}=u(e=>e.cart),{isAuthenticated:C}=u(e=>e.auth);t.useEffect(()=>{C&&N(a())},[N,C]);const F=(e,s)=>{if(s<1)return;const t=S.find(s=>("object"==typeof s.product?s.product._id:s.product)===e);t&&(N(p({itemId:t._id,quantity:s})),y.success("üì¶ Quantity updated!",{style:{background:"linear-gradient(135deg, rgb(139, 92, 246), rgb(59, 130, 246))",color:"#fff",borderRadius:"12px"}}))},S=v||[],E=S.map(e=>({...e,product:"object"==typeof e.product?e.product._id:e.product,category:"object"==typeof e.category?e.category.name:e.category})),$=E.reduce((e,s)=>e+s.price*s.quantity,0),z=$>100?0:15,R=.1*$,q=$+z+R;return k?e.jsx(r,{text:"Loading your magical cart..."}):w&&!S.length?e.jsx("div",{className:"min-h-screen py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"glass-card p-8 text-center rounded-2xl",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-xl font-bold gradient-text mb-2",children:"Error Loading Cart"}),e.jsx("p",{className:"text-purple-300/70 mb-4",children:w}),e.jsx(l,{variant:"neon",onClick:()=>N(a()),children:"Retry"})]})})}):0===S.length?e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:"Shopping Cart - NexusMart"})}),e.jsx("div",{className:"min-h-screen py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-12 text-center rounded-3xl",children:[e.jsx(j.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-8xl mb-6",children:"üõí"}),e.jsx("h2",{className:"text-4xl font-bold gradient-text mb-4",style:{fontFamily:"Orbitron, sans-serif"},children:"Your Cart is Empty"}),e.jsx("p",{className:"text-purple-300/70 mb-8 text-lg",children:"Looks like you haven't added anything to your magical cart yet."}),e.jsx(l,{variant:"3d",size:"lg",icon:n,onClick:()=>f("/products"),children:"Start Shopping"})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:`Shopping Cart (${(null==E?void 0:E.length)||0}) - NexusMart`})}),e.jsx("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-gray-950 via-cyan-950/10 to-gray-950"}),e.jsx(b,{}),e.jsx("div",{className:"min-h-screen py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold mb-2",style:{fontFamily:"Orbitron, sans-serif"},children:e.jsx("span",{className:"gradient-text",children:"Shopping Cart"})}),e.jsxs("p",{className:"text-purple-300/70 text-lg",children:[S.length," ",1===S.length?"item":"items"," in your magical cart"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(g,{mode:"popLayout",children:E.map((s,t)=>e.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.1*t},className:"glass-card p-6 rounded-2xl",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"w-full sm:w-32 h-32 flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover rounded-xl"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-2",children:s.name}),e.jsxs("p",{className:"text-2xl font-bold gradient-text mb-4",children:["$",s.price]}),e.jsxs("div",{className:"flex items-center space-x-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3 bg-purple-500/10 border border-purple-500/30 rounded-xl p-2",children:[e.jsx("button",{onClick:()=>F(s.product,s.quantity-1),className:"w-8 h-8 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg\r\n                                       text-purple-300 hover:text-cyan-400 transition-all duration-300\r\n                                       flex items-center justify-center cursor-pointer relative z-20",style:{pointerEvents:"auto"},children:e.jsx(c,{})}),e.jsx("span",{className:"text-lg font-bold text-purple-300 w-8 text-center",children:s.quantity}),e.jsx("button",{onClick:()=>F(s.product,s.quantity+1),className:"w-8 h-8 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg\r\n                                       text-purple-300 hover:text-cyan-400 transition-all duration-300\r\n                                       flex items-center justify-center cursor-pointer relative z-20",style:{pointerEvents:"auto"},children:e.jsx(d,{})})]}),e.jsx("button",{onClick:()=>(e=>{const s=S.find(s=>("object"==typeof s.product?s.product._id:s.product)===e);s&&(N(m(s._id)),y.success("‚ú® Item removed from cart",{style:{background:"linear-gradient(135deg, rgb(220, 38, 38), rgb(190, 24, 93))",color:"#fff",borderRadius:"12px"}}))})(s.product),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg\r\n                                     transition-all duration-300 cursor-pointer relative z-20",style:{pointerEvents:"auto"},children:e.jsx(o,{className:"text-xl"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-purple-300/50 text-sm mb-1",children:"Item Total"}),e.jsxs("p",{className:"text-2xl font-bold gradient-text",children:["$",(s.price*s.quantity).toFixed(2)]})]})]})},s._id||s.product||t))}),e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsx(l,{variant:"glass",onClick:()=>f("/products"),icon:n,children:"Continue Shopping"})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass-card p-6 rounded-2xl sticky top-24",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Order Summary"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsxs("span",{children:["Subtotal (",E.length," items)"]}),e.jsxs("span",{className:"font-semibold",children:["$",$.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"font-semibold",children:0===z?e.jsx("span",{className:"text-green-400",children:"FREE"}):`$${z.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Tax (10%)"}),e.jsxs("span",{className:"font-semibold",children:["$",R.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-purple-500/30 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold text-purple-300",children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold gradient-text",children:["$",q.toFixed(2)]})]})})]}),z>0&&e.jsx("div",{className:"mb-6 p-4 bg-purple-500/10 border border-purple-500/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-purple-300",children:["üí° Add ",e.jsxs("span",{className:"font-bold text-cyan-400",children:["$",(100-$).toFixed(2)]})," more for FREE shipping!"]})}),e.jsx(l,{variant:"3d",fullWidth:!0,onClick:()=>{f(C?"/checkout":"/login?redirect=/checkout")},icon:x,className:"mb-4",children:"Proceed to Checkout"}),!C&&e.jsxs("p",{className:"text-sm text-purple-300/70 text-center",children:["Please ",e.jsx("span",{className:"text-cyan-400 cursor-pointer hover:underline",onClick:()=>f("/login"),children:"login"})," to checkout"]})]})})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 text-center rounded-2xl",children:[e.jsx("div",{className:"text-5xl mb-3",children:"üöö"}),e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:"Free Shipping"}),e.jsx("p",{className:"text-sm text-purple-300/70",children:"On orders over $100"})]}),e.jsxs("div",{className:"glass-card p-6 text-center rounded-2xl",children:[e.jsx("div",{className:"text-5xl mb-3",children:"üîí"}),e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:"Secure Payment"}),e.jsx("p",{className:"text-sm text-purple-300/70",children:"100% secure transactions"})]}),e.jsxs("div",{className:"glass-card p-6 text-center rounded-2xl",children:[e.jsx("div",{className:"text-5xl mb-3",children:"‚Ü©Ô∏è"}),e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:"Easy Returns"}),e.jsx("p",{className:"text-sm text-purple-300/70",children:"30-day return policy"})]})]})]})})]})};export{N as default};
