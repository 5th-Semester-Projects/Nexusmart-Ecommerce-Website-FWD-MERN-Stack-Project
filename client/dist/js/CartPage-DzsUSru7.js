import{j as e}from"./three-vendor-B3gp6cmk.js";import{r as a,L as t,u as s}from"./react-vendor-takh9Jyk.js";import{T as r,U as i,V as l,M as c,B as d,W as n,X as o,Y as x,P as m,H as h,F as y,b as g}from"./index-CCYBg9KT.js";import{u as p,d as j}from"./redux-vendor-D_jwlZfB.js";import{m as u,z as v,A as b}from"./ui-vendor-CWlZ5n2I.js";import{O as N}from"./OrderSummary-DYG2I-W8.js";import{P as k}from"./ProductCard-3rI5Km4y.js";import"./web3-vendor-OVZtbIUx.js";import"./Input-BJqj1Wnk.js";const f=({item:s})=>{const x=p(),[m,h]=a.useState(!1),[y,g]=a.useState(!1),j=async e=>{if(!(e<1||e>s.stock)){g(!0);try{await x(o({productId:s.product,quantity:e})).unwrap()}catch(a){v.error(a.message||"Failed to update quantity")}finally{g(!1)}}},b=s.price*s.quantity;return e.jsxs(e.Fragment,{children:[e.jsxs(u.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"card p-4 flex flex-col sm:flex-row gap-4",children:[e.jsx(t,{to:`/products/${s.product}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-full sm:w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image||"/placeholder-product.jpg",alt:s.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})})}),e.jsxs("div",{className:"flex-grow space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(t,{to:`/products/${s.product}`,className:"font-semibold text-gray-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 transition-colors line-clamp-2",children:s.name}),e.jsx(u.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!0),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex-shrink-0","aria-label":"Remove item",children:e.jsx(r,{className:"w-5 h-5"})})]}),s.variants&&Object.keys(s.variants).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.variants).map(([a,t])=>e.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full",children:[a,": ",t]},a))}),s.stock<10&&e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:0===s.stock?"‚ùå Out of Stock":`‚ö†Ô∏è Only ${s.stock} left in stock`}),e.jsxs("div",{className:"flex items-center justify-between gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 hidden sm:block",children:"Qty:"}),e.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsx(u.button,{whileHover:{backgroundColor:"rgba(99, 102, 241, 0.1)"},whileTap:{scale:.9},onClick:()=>{s.quantity>1&&j(s.quantity-1)},disabled:s.quantity<=1||y,className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-4 py-2 min-w-[3rem] text-center font-semibold text-gray-900 dark:text-white border-x border-gray-300 dark:border-gray-600",children:y?"...":s.quantity}),e.jsx(u.button,{whileHover:{backgroundColor:"rgba(99, 102, 241, 0.1)"},whileTap:{scale:.9},onClick:()=>{s.quantity<s.stock?j(s.quantity+1):v.error("Maximum available quantity reached")},disabled:s.quantity>=s.stock||y,className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(l,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:["$",b.toFixed(2)]}),s.quantity>1&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["$",s.price.toFixed(2)," each"]})]})]})]})]}),e.jsx(c,{isOpen:m,onClose:()=>h(!1),title:"Remove Item",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to remove ",e.jsx("strong",{children:s.name})," from your cart?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{variant:"outline",fullWidth:!0,onClick:()=>h(!1),children:"Cancel"}),e.jsx(d,{variant:"danger",fullWidth:!0,onClick:()=>{x(n(s.product)),v.success("Item removed from cart"),h(!1)},children:"Remove"})]})]})})]})},w=()=>{const t=p(),r=s(),{items:i,loading:l,error:c}=j(e=>e.cart),{isAuthenticated:n}=j(e=>e.auth);a.useEffect(()=>{n&&t(x())},[t,n]);const o=[];return l?e.jsx(m,{text:"Loading your cart..."}):c?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading Cart"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:c}),e.jsx(d,{variant:"primary",onClick:()=>t(x()),children:"Retry"})]})})}):0===i.length?e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsx("title",{children:"Shopping Cart - NexusMart"})}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-12 text-center",children:[e.jsx(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-8xl mb-6",children:"üõí"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Looks like you haven't added anything to your cart yet."}),e.jsx(d,{variant:"primary",size:"lg",icon:y,onClick:()=>r("/products"),children:"Start Shopping"})]}),o.length>0&&e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-12",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"You May Also Like"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(a=>e.jsx(k,{product:a},a._id))})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsxs("title",{children:["Shopping Cart (",i.length,") - NexusMart"]})}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Shopping Cart"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[i.length," ",1===i.length?"item":"items"," in your cart"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(b,{mode:"popLayout",children:i.map(a=>e.jsx(f,{item:a},a.product))}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsx(d,{variant:"outline",onClick:()=>r("/products"),icon:y,children:"Continue Shopping"})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(N,{onCheckout:()=>{r(n?"/checkout":"/login?redirect=/checkout")}})})]}),o.length>0&&e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-16",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Frequently Bought Together"}),e.jsx(d,{variant:"ghost",icon:g,children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:o.slice(0,4).map(a=>e.jsx(k,{product:a},a._id))})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üöö"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Free Shipping"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"On orders over $100"})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üîí"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Secure Payment"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"100% secure transactions"})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"‚Ü©Ô∏è"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Easy Returns"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"30-day return policy"})]})]})]})})]})};export{w as default};
