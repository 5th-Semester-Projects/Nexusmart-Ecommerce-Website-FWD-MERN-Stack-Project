import{j as e}from"./three-vendor-DRmFIuG2-1764454284185.js";import{r as a}from"./react-vendor-Jz9jFFXE-1764454284185.js";import{u as s,k as r}from"./redux-vendor-7fkQrgLn-1764454284185.js";import{ar as t,as as l,at as i,H as n,B as c,u as o,G as d,au as g,S as m,s as x,aI as u,aJ as h,aK as y,aL as p}from"./index-CZtb14Tz-1764454284185.js";import{z as j,m as b}from"./ui-vendor-CSkMDie2-1764454284185.js";import{M as v}from"./Modal-CPSPEJBv-1764454284185.js";import{I as f}from"./Input-BSQaMQYQ-1764454284185.js";const N=({category:s,onSubmit:r,onClose:t,isLoading:l})=>{var i;const[n,o]=a.useState({name:(null==s?void 0:s.name)||"",description:(null==s?void 0:s.description)||"",slug:(null==s?void 0:s.slug)||"",isActive:(null==s?void 0:s.isActive)??!0}),[d,g]=a.useState(null),[m,x]=a.useState((null==(i=null==s?void 0:s.image)?void 0:i.url)||null),h=e=>{const{name:a,value:s,type:r,checked:t}=e.target;o(e=>({...e,[a]:"checkbox"===r?t:s})),"name"===a&&o(e=>({...e,slug:s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}))};return e.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=new FormData;Object.keys(n).forEach(e=>{a.append(e,n[e])}),d&&a.append("image",d),r(a)},className:"space-y-6",children:[e.jsx(f,{label:"Category Name",name:"name",value:n.name,onChange:h,placeholder:"Enter category name",required:!0}),e.jsx(f,{label:"Slug",name:"slug",value:n.slug,onChange:h,placeholder:"category-slug",helperText:"URL-friendly version of the name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Description"}),e.jsx("textarea",{name:"description",value:n.description,onChange:h,placeholder:"Enter category description",rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[m?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{g(null),x(null)},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:"Ã—"})]}):e.jsx("div",{className:"w-20 h-20 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];a&&(g(a),x(URL.createObjectURL(a)))},className:"hidden"}),e.jsx("span",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:m?"Change Image":"Upload Image"})]})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:h,className:"w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Category is active"})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(c,{variant:"outline",type:"button",onClick:t,fullWidth:!0,children:"Cancel"}),e.jsx(c,{variant:"primary",type:"submit",disabled:l,fullWidth:!0,children:l?"Saving...":s?"Update Category":"Create Category"})]})]})},w=()=>{const u=s(),{categories:f,categoriesLoading:w,actionLoading:k,success:C,error:S,products:A}=r(e=>e.admin),[L,z]=a.useState(!1),[D,I]=a.useState(null),[E,O]=a.useState(null);a.useEffect(()=>{u(t())},[u]),a.useEffect(()=>{C&&(j.success(C),u(l()),z(!1),I(null),O(null)),S&&(j.error(S),u(i()))},[C,S,u]);const U=()=>{I(null),z(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx("title",{children:"Categories Management - NexusMart Admin"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Categories"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Organize your products into categories (",f.length," total)"]})]}),e.jsx(c,{variant:"primary",icon:o,onClick:U,children:"Add Category"})]}),w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Loading categories..."})]})}):0===f.length?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first category to organize products"}),e.jsx(c,{variant:"primary",icon:o,onClick:U,children:"Add Category"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(a=>{var s,r;return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden group hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"h-40 bg-gradient-to-br from-primary-400 to-purple-500 relative overflow-hidden",children:[(null==(s=a.image)?void 0:s.url)?e.jsx("img",{src:a.image.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(d,{className:"w-16 h-16 text-white/50"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium "+(a.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:a.isActive?"Active":"Inactive"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>(e=>{I(e),z(!0)})(a),className:"p-3 bg-white rounded-full text-gray-800 hover:bg-gray-100 transition-colors",children:e.jsx(g,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>O(a),className:"p-3 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:e.jsx(m,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:a.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(x,{className:"w-4 h-4"}),(r=a._id,A&&0!==A.length?A.filter(e=>{var a;return(null==(a=e.category)?void 0:a._id)===r||e.category===r}).length:0)," Products"]}),e.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:["/",a.slug]})]})]})]},a._id)})})]}),e.jsx(v,{isOpen:L,onClose:()=>{z(!1),I(null)},title:D?"Edit Category":"Create New Category",size:"md",children:e.jsx(N,{category:D,onSubmit:D?e=>{u(h({id:D._id,categoryData:e}))}:e=>{u(y(e))},onClose:()=>{z(!1),I(null)},isLoading:k})}),e.jsx(v,{isOpen:!!E,onClose:()=>O(null),title:"Delete Category",size:"sm",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-8 h-8 text-red-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:['Delete "',null==E?void 0:E.name,'"?']}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This will remove the category. Products in this category will be uncategorized."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{variant:"outline",onClick:()=>O(null),fullWidth:!0,children:"Cancel"}),e.jsx(c,{variant:"primary",className:"!bg-red-600 hover:!bg-red-700",onClick:()=>{E&&u(p(E._id))},disabled:k,fullWidth:!0,children:k?"Deleting...":"Delete"})]})]})})]})};export{w as default};
