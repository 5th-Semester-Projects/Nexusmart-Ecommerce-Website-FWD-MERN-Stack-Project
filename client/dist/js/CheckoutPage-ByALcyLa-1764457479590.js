import{j as e}from"./three-vendor-DzHuryGB-1764457479590.js";import{u as t,r as s,b as a}from"./react-vendor-Jz9jFFXE-1764457479590.js";import{P as r,H as l,a3 as i,a4 as n,a5 as o,N as d,B as c,r as x,a6 as p,a7 as u}from"./index-BXp2R2Gg-1764457479590.js";import{u as m,k as h}from"./redux-vendor-DDQMZp9B-1764457479590.js";import{m as b,A as y,z as f}from"./ui-vendor-BIb0IfS4-1764457479590.js";import{M as j}from"./MagicalGenie-BIe9sDIc-1764457479590.js";const v=()=>{const v=m(),g=t(),{items:N}=h(e=>e.cart),{user:w,isAuthenticated:C}=h(e=>e.auth),[k,S]=s.useState(1),[z,E]=s.useState(!1),[P,q]=s.useState({fullName:(null==w?void 0:w.name)||"",email:(null==w?void 0:w.email)||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States"}),[F,D]=s.useState({cardNumber:"",cardName:"",expiryDate:"",cvv:"",saveCard:!1});s.useEffect(()=>{C||g("/login?redirect=/checkout"),N&&0!==N.length||g("/cart")},[C,N,g]);const O=(null==N?void 0:N.reduce((e,t)=>e+t.price*t.quantity,0))||0,I=O>100?0:15,$=.1*O,A=O+I+$,M=[{id:1,name:"Shipping",icon:n},{id:2,name:"Payment",icon:o},{id:3,name:"Review",icon:d}];return N&&0!==N.length?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("title",{children:"Checkout - NexusMart"})}),e.jsx("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-gray-950 via-purple-950/10 to-gray-950"}),e.jsx(j,{}),e.jsx("div",{className:"min-h-screen py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",style:{fontFamily:"Orbitron, sans-serif"},children:e.jsx("span",{className:"gradient-text",children:"Secure Checkout"})}),e.jsxs("div",{className:"flex items-center space-x-2 text-purple-300/70",children:[e.jsx(i,{className:"text-green-400"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]})]}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:e.jsx("div",{className:"glass-card p-6 rounded-2xl",children:e.jsx("div",{className:"flex justify-between items-center",children:M.map((t,s)=>e.jsxs(a.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx(b.div,{whileHover:{scale:1.05},className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-3 transition-all duration-300 "+(k>=t.id?"bg-gradient-to-r from-purple-600 to-blue-600 shadow-lg shadow-purple-500/50":"bg-purple-500/10 border-2 border-purple-500/30"),children:e.jsx(t.icon,{className:"text-2xl "+(k>=t.id?"text-white":"text-purple-400")})}),e.jsx("span",{className:"text-sm font-semibold "+(k>=t.id?"text-cyan-400":"text-purple-300/50"),children:t.name})]}),s<M.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-4 rounded-full transition-all duration-300 "+(k>t.id?"bg-gradient-to-r from-purple-600 to-blue-600":"bg-purple-500/20")})]},t.id))})})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y,{mode:"wait",children:[1===k&&e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Information"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),Object.values(P).every(e=>e)?S(2):f.error("Please fill all shipping details")},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:P.fullName,onChange:e=>q({...P,fullName:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:P.email,onChange:e=>q({...P,email:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"john@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:P.phone,onChange:e=>q({...P,phone:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                   text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                   relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Street Address *"}),e.jsx("input",{type:"text",value:P.address,onChange:e=>q({...P,address:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                   text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                   relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"City *"}),e.jsx("input",{type:"text",value:P.city,onChange:e=>q({...P,city:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"New York"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"State *"}),e.jsx("input",{type:"text",value:P.state,onChange:e=>q({...P,state:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"NY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"ZIP Code *"}),e.jsx("input",{type:"text",value:P.zipCode,onChange:e=>q({...P,zipCode:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"10001"})]})]}),e.jsx(c,{type:"submit",variant:"3d",fullWidth:!0,icon:x,children:"Continue to Payment"})]})]},"shipping"),2===k&&e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Information"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),F.cardNumber&&F.cardName&&F.expiryDate&&F.cvv?S(3):f.error("Please fill all payment details")},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",value:F.cardNumber,onChange:e=>D({...F,cardNumber:e.target.value}),required:!0,maxLength:"19",className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                   text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                   relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"1234 5678 9012 3456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",value:F.cardName,onChange:e=>D({...F,cardName:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                   text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                   relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"John Doe"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Expiry Date *"}),e.jsx("input",{type:"text",value:F.expiryDate,onChange:e=>D({...F,expiryDate:e.target.value}),required:!0,maxLength:"5",className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"CVV *"}),e.jsx("input",{type:"text",value:F.cvv,onChange:e=>D({...F,cvv:e.target.value}),required:!0,maxLength:"4",className:"w-full px-4 py-3 bg-gray-900/50 border-2 border-purple-500/30 rounded-xl\r\n                                     text-white focus:border-cyan-500 focus:outline-none transition-all duration-300\r\n                                     relative z-10 cursor-text",style:{pointerEvents:"auto"},placeholder:"123"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.saveCard,onChange:e=>D({...F,saveCard:e.target.checked}),className:"w-5 h-5 rounded border-2 border-purple-500/30 bg-gray-900/50\r\n                                   text-purple-600 focus:ring-2 focus:ring-purple-500/50"}),e.jsx("span",{className:"text-purple-300",children:"Save card for future purchases"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{variant:"glass",onClick:()=>S(1),children:"Back"}),e.jsx(c,{type:"submit",variant:"3d",fullWidth:!0,icon:x,children:"Review Order"})]})]})]},"payment"),3===k&&e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Address"}),e.jsx("button",{onClick:()=>S(1),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),e.jsxs("div",{className:"text-purple-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:P.fullName}),e.jsx("p",{children:P.address}),e.jsxs("p",{children:[P.city,", ",P.state," ",P.zipCode]}),e.jsx("p",{children:P.email}),e.jsx("p",{children:P.phone})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Method"}),e.jsx("button",{onClick:()=>S(2),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"text-3xl text-purple-400"}),e.jsxs("div",{className:"text-purple-300",children:[e.jsxs("p",{className:"font-semibold",children:["**** **** **** ",F.cardNumber.slice(-4)]}),e.jsxs("p",{className:"text-sm",children:["Expires ",F.expiryDate]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{variant:"glass",onClick:()=>S(2),children:"Back"}),e.jsx(c,{variant:"3d",fullWidth:!0,onClick:async()=>{E(!0);try{const e={orderNumber:`NXS${Date.now().toString().slice(-8)}`,orderItems:N.map(e=>{var t,s,a;let r=null;e.product&&"object"==typeof e.product?r=e.product._id:e.product&&"string"==typeof e.product?r=e.product:e._id&&(r=e._id);const l=e.price||0,i=e.quantity||1;return{product:r,name:(null==(t=e.product)?void 0:t.name)||e.name||"Product",price:l,quantity:i,image:(null==(a=null==(s=e.product)?void 0:s.images)?void 0:a[0])||e.image||"",finalPrice:l*i}}),shippingInfo:{firstName:P.fullName.split(" ")[0]||"Customer",lastName:P.fullName.split(" ").slice(1).join(" ")||"User",email:P.email,phone:P.phone||"0000000000",address:{street:P.address||"N/A",city:P.city||"N/A",state:P.state||"N/A",country:P.country||"United States",zipCode:P.zipCode||"00000"}},paymentInfo:{method:"card",provider:"stripe",transactionId:`txn_${Date.now()}`,status:"completed"},pricing:{itemsPrice:O,taxPrice:$,shippingPrice:I,discountPrice:0,totalPrice:A}},t=await v(p(e)).unwrap();v(u()),f.success("ðŸŽ‰ Order placed successfully!",{style:{background:"linear-gradient(135deg, rgb(34, 197, 94), rgb(21, 128, 61))",color:"#fff",borderRadius:"12px"}}),g("/order-confirmation",{state:{orderData:{orderId:t.order._id,...t.order,shippingInfo:P,items:N,subtotal:O,shipping:I,tax:$,total:A}}})}catch(e){f.error(e||"Failed to place order. Please try again.")}finally{E(!1)}},disabled:z,icon:z?null:d,children:z?"Processing...":"Place Order"})]})]},"review")]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass-card p-6 rounded-2xl sticky top-24",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto",children:N.map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-300 text-sm font-semibold line-clamp-2",children:t.name}),e.jsxs("p",{className:"text-purple-300/70 text-sm",children:["Qty: ",t.quantity]}),e.jsxs("p",{className:"text-cyan-400 font-bold",children:["$",(t.price*t.quantity).toFixed(2)]})]})]},t.product))}),e.jsxs("div",{className:"space-y-3 border-t border-purple-500/30 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",O.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"font-semibold",children:0===I?e.jsx("span",{className:"text-green-400",children:"FREE"}):`$${I.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"font-semibold",children:["$",$.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-purple-500/30 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold text-purple-300",children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold gradient-text",children:["$",A.toFixed(2)]})]})})]})]})})]})]})})]}):e.jsx(r,{text:"Loading checkout..."})};export{v as default};
