import{j as e}from"./three-vendor-B3gp6cmk.js";import{u as a,r,R as s}from"./react-vendor-takh9Jyk.js";import{P as t,H as i,_ as d,$ as l,e as n,a0 as c,B as o,a1 as m}from"./index-CCYBg9KT.js";import{u as x,d as h}from"./redux-vendor-D_jwlZfB.js";import{I as p}from"./Input-BJqj1Wnk.js";import{O as y}from"./OrderSummary-DYG2I-W8.js";import{m as g,A as u,z as j}from"./ui-vendor-CWlZ5n2I.js";import"./web3-vendor-OVZtbIUx.js";const b=[{id:1,name:"Shipping",icon:d},{id:2,name:"Payment",icon:l},{id:3,name:"Review",icon:n}],v=()=>{const d=a();x();const{items:l,loading:n}=h(e=>e.cart),{user:v,isAuthenticated:N}=h(e=>e.auth),[f,k]=r.useState(1),[C,w]=r.useState({fullName:(null==v?void 0:v.name)||"",email:(null==v?void 0:v.email)||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",saveAddress:!1,paymentMethod:"card",cardNumber:"",cardName:"",expiryDate:"",cvv:"",deliveryMethod:"standard"}),[M,q]=r.useState({}),[P,S]=r.useState(!1);r.useEffect(()=>{N||d("/login?redirect=/checkout"),0===l.length&&d("/cart")},[N,l,d]);const D=e=>{const a={};return 1===e&&(C.fullName.trim()||(a.fullName="Full name is required"),C.email.trim()?/\S+@\S+\.\S+/.test(C.email)||(a.email="Invalid email"):a.email="Email is required",C.phone.trim()||(a.phone="Phone is required"),C.address.trim()||(a.address="Address is required"),C.city.trim()||(a.city="City is required"),C.state.trim()||(a.state="State is required"),C.zipCode.trim()||(a.zipCode="ZIP code is required")),2===e&&"card"===C.paymentMethod&&(C.cardNumber.trim()?/^\d{16}$/.test(C.cardNumber.replace(/\s/g,""))||(a.cardNumber="Invalid card number"):a.cardNumber="Card number is required",C.cardName.trim()||(a.cardName="Cardholder name is required"),C.expiryDate.trim()?/^\d{2}\/\d{2}$/.test(C.expiryDate)||(a.expiryDate="Invalid format (MM/YY)"):a.expiryDate="Expiry date is required",C.cvv.trim()?/^\d{3,4}$/.test(C.cvv)||(a.cvv="Invalid CVV"):a.cvv="CVV is required"),q(a),0===Object.keys(a).length},z=e=>{const{name:a,value:r,type:s,checked:t}=e.target;w(e=>({...e,[a]:"checkbox"===s?t:r})),M[a]&&q(e=>({...e,[a]:""}))},E=()=>{D(f)?(k(e=>Math.min(e+1,3)),window.scrollTo({top:0,behavior:"smooth"})):j.error("Please fill in all required fields")},I=()=>{k(e=>Math.max(e-1,1)),window.scrollTo({top:0,behavior:"smooth"})};return n?e.jsx(t,{text:"Loading checkout..."}):e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:"Checkout - NexusMart"})}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Checkout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete your purchase"})]}),e.jsx(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-12",children:e.jsx("div",{className:"flex items-center justify-center",children:b.map((a,r)=>e.jsxs(s.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(g.div,{whileHover:{scale:1.05},className:"w-12 h-12 rounded-full flex items-center justify-center font-bold transition-all "+(f>a.id?"bg-green-500 text-white":f===a.id?"bg-primary-600 text-white ring-4 ring-primary-200 dark:ring-primary-800":"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:f>a.id?e.jsx(c,{className:"w-6 h-6"}):e.jsx(a.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"mt-2 text-sm font-medium "+(f>=a.id?"text-gray-900 dark:text-white":"text-gray-500"),children:a.name})]}),r<b.length-1&&e.jsx("div",{className:"w-24 h-1 mx-4 rounded transition-all "+(f>a.id?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},a.id))})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(u,{mode:"wait",children:[1===f&&e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"card p-6 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Shipping Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Full Name",name:"fullName",value:C.fullName,onChange:z,error:M.fullName,required:!0}),e.jsx(p,{label:"Email",type:"email",name:"email",value:C.email,onChange:z,error:M.email,required:!0})]}),e.jsx(p,{label:"Phone Number",type:"tel",name:"phone",value:C.phone,onChange:z,error:M.phone,required:!0}),e.jsx(p,{label:"Address",name:"address",value:C.address,onChange:z,error:M.address,helperText:"Street address, P.O. box",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{label:"City",name:"city",value:C.city,onChange:z,error:M.city,required:!0}),e.jsx(p,{label:"State",name:"state",value:C.state,onChange:z,error:M.state,required:!0}),e.jsx(p,{label:"ZIP Code",name:"zipCode",value:C.zipCode,onChange:z,error:M.zipCode,required:!0})]}),e.jsx(p,{label:"Country",name:"country",value:C.country,onChange:z,disabled:!0}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"saveAddress",checked:C.saveAddress,onChange:z,className:"rounded text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Save this address for future orders"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{variant:"primary",size:"lg",onClick:E,children:"Continue to Payment"})})]},"step1"),2===f&&e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"card p-6 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Payment Method"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white",children:"Delivery Method"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"relative flex items-center justify-between p-4 border-2 rounded-lg cursor-pointer transition-all "+("standard"===C.deliveryMethod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-primary-300"),children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"deliveryMethod",value:"standard",checked:"standard"===C.deliveryMethod,onChange:z,className:"sr-only"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Standard Delivery"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"5-7 business days"})]}),e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:"FREE"})]}),e.jsxs("label",{className:"relative flex items-center justify-between p-4 border-2 rounded-lg cursor-pointer transition-all "+("express"===C.deliveryMethod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-primary-300"),children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"deliveryMethod",value:"express",checked:"express"===C.deliveryMethod,onChange:z,className:"sr-only"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Express Delivery"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"2-3 business days"})]}),e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:"$15.00"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white",children:"Payment Method"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+("card"===C.paymentMethod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===C.paymentMethod,onChange:z,className:"text-primary-600"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:"Credit/Debit Card"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:"Visa"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:"Mastercard"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+("upi"===C.paymentMethod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"upi",checked:"upi"===C.paymentMethod,onChange:z,className:"text-primary-600"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:"UPI"})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all "+("cod"===C.paymentMethod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"cod",checked:"cod"===C.paymentMethod,onChange:z,className:"text-primary-600"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:"Cash on Delivery"})]})]})]}),"card"===C.paymentMethod&&e.jsxs(g.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-4",children:[e.jsx(p,{label:"Card Number",name:"cardNumber",value:C.cardNumber,onChange:z,error:M.cardNumber,placeholder:"1234 5678 9012 3456",maxLength:19,required:!0}),e.jsx(p,{label:"Cardholder Name",name:"cardName",value:C.cardName,onChange:z,error:M.cardName,placeholder:"John Doe",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Expiry Date",name:"expiryDate",value:C.expiryDate,onChange:z,error:M.expiryDate,placeholder:"MM/YY",maxLength:5,required:!0}),e.jsx(p,{label:"CVV",name:"cvv",value:C.cvv,onChange:z,error:M.cvv,placeholder:"123",maxLength:4,type:"password",required:!0})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(o,{variant:"outline",size:"lg",onClick:I,children:"Back"}),e.jsx(o,{variant:"primary",size:"lg",onClick:E,children:"Review Order"})]})]},"step2"),3===f&&e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Shipping Address"}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>k(1),children:"Edit"})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:C.fullName}),e.jsx("p",{children:C.address}),e.jsxs("p",{children:[C.city,", ",C.state," ",C.zipCode]}),e.jsx("p",{children:C.country}),e.jsxs("p",{children:["Phone: ",C.phone]}),e.jsxs("p",{children:["Email: ",C.email]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Method"}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>k(2),children:"Edit"})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:"card"===C.paymentMethod?"Credit/Debit Card":"upi"===C.paymentMethod?"UPI":"Cash on Delivery"}),"card"===C.paymentMethod&&e.jsxs("p",{children:["â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ ",C.cardNumber.slice(-4)]}),e.jsxs("p",{className:"capitalize",children:["Delivery: ",C.deliveryMethod," (","express"===C.deliveryMethod?"$15.00":"FREE",")"]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:l.map(a=>e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200 dark:border-gray-700 last:border-0",children:[e.jsx("img",{src:a.image||"/placeholder-product.jpg",alt:a.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Qty: ",a.quantity]})]}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["$",(a.price*a.quantity).toFixed(2)]})]},a.product))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(o,{variant:"outline",size:"lg",onClick:I,children:"Back"}),e.jsx(o,{variant:"primary",size:"lg",icon:m,onClick:async()=>{if(D(2)){S(!0);try{await new Promise(e=>setTimeout(e,2e3)),j.success("Order placed successfully! ðŸŽ‰"),d("/orders/success")}catch(e){j.error(e.message||"Failed to place order")}finally{S(!1)}}else j.error("Please complete payment information")},loading:P,disabled:P,children:P?"Processing...":"Place Order"})]})]},"step3")]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(y,{isCheckoutPage:!0})})]}),e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-6 py-3 rounded-full",children:[e.jsx(m,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Secure SSL encrypted checkout"})]})})]})})]})};export{v as default};
