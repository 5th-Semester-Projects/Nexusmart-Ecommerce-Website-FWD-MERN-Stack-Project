import{j as e}from"./three-vendor-NGjDDMOY-1764461529302.js";import{u as t,r as s,b as r}from"./react-vendor-Jz9jFFXE-1764461529302.js";import{P as a,H as l,a3 as i,a4 as n,a5 as d,N as c,a6 as o,B as x,r as p,a7 as m,a8 as u,a9 as h}from"./index-DdsrP8CT-1764461529302.js";import{u as b,k as g}from"./redux-vendor-BXXPT4Pv-1764461529302.js";import{m as j,A as f,z as y}from"./ui-vendor-CACE6jgl-1764461529302.js";import{M as N}from"./MagicalGenie-DFJiYMp2-1764461529302.js";const v=()=>{const v=b(),w=t(),{items:C}=g(e=>e.cart),{user:k,isAuthenticated:z}=g(e=>e.auth),[D,E]=s.useState(1),[P,$]=s.useState(!1),[S,A]=s.useState("card"),[F,I]=s.useState({}),[O,M]=s.useState({fullName:(null==k?void 0:k.name)||"",email:(null==k?void 0:k.email)||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"Pakistan"}),[Z,q]=s.useState({cardNumber:"",cardName:"",expiryDate:"",cvv:"",saveCard:!1}),L={fullName:/^[a-zA-Z\s]{3,50}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^(\+92|0)?[0-9]{10}$/,address:/^.{10,100}$/,city:/^[a-zA-Z\s]{2,30}$/,state:/^[a-zA-Z\s]{2,30}$/,zipCode:/^[0-9]{5}$/,cardNumber:/^[0-9]{16}$/,cardName:/^[a-zA-Z\s]{3,50}$/,expiryDate:/^(0[1-9]|1[0-2])\/([0-9]{2})$/,cvv:/^[0-9]{3,4}$/},H=(e,t)=>{let s=t;if("phone"===e&&(s=t.replace(/[-\s]/g,"")),"cardNumber"===e&&(s=t.replace(/\s/g,"")),!s||""===s.trim())return"This field is required";if(L[e]&&!L[e].test(s))switch(e){case"fullName":return"Enter valid name (3-50 letters only)";case"email":return"Enter valid email (e.g., name@example.com)";case"phone":return"Enter valid Pakistani phone (e.g., 0300-1234567)";case"address":return"Address must be 10-100 characters";case"city":return"Enter valid city name";case"state":return"Enter valid state/province name";case"zipCode":return"Enter 5-digit ZIP code (e.g., 54000)";case"cardNumber":return"Enter 16-digit card number";case"cardName":return"Enter cardholder name as on card";case"expiryDate":return"Enter valid date (MM/YY)";case"cvv":return"Enter 3 or 4 digit CVV";default:return"Invalid format"}if("expiryDate"===e&&L[e].test(s)){const[e,t]=s.split("/");if(new Date(2e3+parseInt(t),parseInt(e)-1)<new Date)return"Card has expired"}return""},_=e=>{const{name:t,value:s}=e.target;let r=s;"phone"===t&&(r=(e=>{const t=e.replace(/\D/g,"");return t.length<=4?t:t.length<=7?`${t.slice(0,4)}-${t.slice(4)}`:`${t.slice(0,4)}-${t.slice(4,11)}`})(s)),"zipCode"===t&&(r=s.replace(/\D/g,"").slice(0,5)),"fullName"!==t&&"city"!==t&&"state"!==t||(r=s.replace(/[^a-zA-Z\s]/g,"")),M({...O,[t]:r}),F[t]&&I({...F,[t]:""})},Y=e=>{const{name:t,value:s}=e.target;let r=s;"cardNumber"===t&&(r=(e=>{const t=e.replace(/\D/g,""),s=t.match(/.{1,4}/g);return s?s.join(" "):t})(s),r.replace(/\s/g,"").length>16)||"expiryDate"===t&&(r=(e=>{const t=e.replace(/\D/g,"");return t.length>=2?`${t.slice(0,2)}/${t.slice(2,4)}`:t})(s),r.length>5)||("cvv"===t&&(r=s.replace(/\D/g,"").slice(0,4)),"cardName"===t&&(r=s.replace(/[^a-zA-Z\s]/g,"")),q({...Z,[t]:r}),F[t]&&I({...F,[t]:""}))};s.useEffect(()=>{z||w("/login?redirect=/checkout"),C&&0!==C.length||w("/cart")},[z,C,w]);const B=(null==C?void 0:C.reduce((e,t)=>e+t.price*t.quantity,0))||0,R=B>100?0:15,V=.1*B,T=B+R+V,W=[{id:1,name:"Shipping",icon:n},{id:2,name:"Payment",icon:d},{id:3,name:"Review",icon:c}];return C&&0!==C.length?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("title",{children:"Checkout - NexusMart"})}),e.jsx("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-gray-950 via-purple-950/10 to-gray-950"}),e.jsx(N,{}),e.jsx("div",{className:"min-h-screen py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",style:{fontFamily:"Orbitron, sans-serif"},children:e.jsx("span",{className:"gradient-text",children:"Secure Checkout"})}),e.jsxs("div",{className:"flex items-center space-x-2 text-purple-300/70",children:[e.jsx(i,{className:"text-green-400"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:e.jsx("div",{className:"glass-card p-6 rounded-2xl",children:e.jsx("div",{className:"flex justify-between items-center",children:W.map((t,s)=>e.jsxs(r.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx(j.div,{whileHover:{scale:1.05},className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-3 transition-all duration-300 "+(D>=t.id?"bg-gradient-to-r from-purple-600 to-blue-600 shadow-lg shadow-purple-500/50":"bg-purple-500/10 border-2 border-purple-500/30"),children:e.jsx(t.icon,{className:"text-2xl "+(D>=t.id?"text-white":"text-purple-400")})}),e.jsx("span",{className:"text-sm font-semibold "+(D>=t.id?"text-cyan-400":"text-purple-300/50"),children:t.name})]}),s<W.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-4 rounded-full transition-all duration-300 "+(D>t.id?"bg-gradient-to-r from-purple-600 to-blue-600":"bg-purple-500/20")})]},t.id))})})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(f,{mode:"wait",children:[1===D&&e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Information"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t={};if(["fullName","email","phone","address","city","state","zipCode"].forEach(e=>{const s=H(e,O[e]);s&&(t[e]=s)}),Object.keys(t).length>0)return I(t),void y.error("Please fix the errors in the form");E(2)},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",value:O.fullName,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.fullName?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Ahmed Khan"}),F.fullName&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.fullName]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Only letters and spaces allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:O.email,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.email?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., ahmed@email.com"}),F.email&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.email]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:O.phone,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.phone?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 0300-1234567",maxLength:"12"}),F.phone&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.phone]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Pakistani format: 0300-1234567 or +923001234567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Street Address *"}),e.jsx("input",{type:"text",name:"address",value:O.address,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.address?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., House 123, Street 45, Block A, DHA Phase 5"}),F.address&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.address]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Complete address with house/flat number, street, block/sector"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"City *"}),e.jsx("input",{type:"text",name:"city",value:O.city,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.city?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Lahore"}),F.city&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.city]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Province *"}),e.jsx("input",{type:"text",name:"state",value:O.state,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.state?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Punjab"}),F.state&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.state]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"ZIP Code *"}),e.jsx("input",{type:"text",name:"zipCode",value:O.zipCode,onChange:_,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.zipCode?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 54000",maxLength:"5"}),F.zipCode&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.zipCode]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"5-digit postal code"})]})]}),e.jsx(x,{type:"submit",variant:"3d",fullWidth:!0,icon:p,children:"Continue to Payment"})]})]},"shipping"),2===D&&e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Method"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{onClick:()=>A("card"),className:"p-6 rounded-xl cursor-pointer transition-all duration-300 border-2 "+("card"===S?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 border-cyan-500 shadow-lg shadow-cyan-500/20":"bg-gray-900/30 border-purple-500/30 hover:border-purple-500/50"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("card"===S?"bg-cyan-500":"bg-purple-500/30"),children:e.jsx(d,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"Credit/Debit Card"}),e.jsx("p",{className:"text-purple-300/70 text-sm",children:"Pay securely with card"})]})]})}),e.jsx("div",{onClick:()=>A("cod"),className:"p-6 rounded-xl cursor-pointer transition-all duration-300 border-2 "+("cod"===S?"bg-gradient-to-r from-green-600/30 to-emerald-600/30 border-green-500 shadow-lg shadow-green-500/20":"bg-gray-900/30 border-purple-500/30 hover:border-purple-500/50"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("cod"===S?"bg-green-500":"bg-purple-500/30"),children:e.jsx(m,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"Cash on Delivery"}),e.jsx("p",{className:"text-purple-300/70 text-sm",children:"Pay when you receive"})]})]})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),"cod"===S)return void E(3);const t={};if(["cardNumber","cardName","expiryDate","cvv"].forEach(e=>{const s=H(e,Z[e]);s&&(t[e]=s)}),Object.keys(t).length>0)return I(t),void y.error("Please fix the errors in the form");E(3)},className:"space-y-6",children:["card"===S?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",name:"cardNumber",value:Z.cardNumber,onChange:Y,maxLength:"19",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.cardNumber?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 4111 1111 1111 1111"}),F.cardNumber&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.cardNumber]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"16 digits, spaces auto-added"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",name:"cardName",value:Z.cardName,onChange:Y,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.cardName?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., AHMED KHAN (as printed on card)"}),F.cardName&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.cardName]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Name exactly as on the card"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Expiry Date *"}),e.jsx("input",{type:"text",name:"expiryDate",value:Z.expiryDate,onChange:Y,maxLength:"5",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.expiryDate?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 12/25"}),F.expiryDate&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.expiryDate]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Month/Year format"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"CVV *"}),e.jsx("input",{type:"password",name:"cvv",value:Z.cvv,onChange:Y,maxLength:"4",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(F.cvv?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 123"}),F.cvv&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{})," ",F.cvv]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"3-4 digits on back of card"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.saveCard,onChange:e=>q({...Z,saveCard:e.target.checked}),className:"w-5 h-5 rounded border-2 border-purple-500/30 bg-gray-900/50 text-purple-600 focus:ring-2 focus:ring-purple-500/50"}),e.jsx("span",{className:"text-purple-300",children:"Save card for future purchases"})]})]}):e.jsx("div",{className:"p-6 bg-green-500/10 border-2 border-green-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(c,{className:"text-2xl text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-400 font-bold text-lg mb-2",children:"Cash on Delivery Selected"}),e.jsxs("p",{className:"text-green-300/70",children:["You will pay ",e.jsxs("span",{className:"font-bold text-white",children:["$",T.toFixed(2)]})," in cash when your order is delivered."]}),e.jsxs("ul",{className:"mt-3 space-y-1 text-green-300/70 text-sm",children:[e.jsx("li",{children:"âœ“ No advance payment required"}),e.jsx("li",{children:"âœ“ Pay only when you receive the order"}),e.jsx("li",{children:"âœ“ Inspect items before paying"})]})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{variant:"glass",onClick:()=>E(1),children:"Back"}),e.jsx(x,{type:"submit",variant:"3d",fullWidth:!0,icon:p,children:"Review Order"})]})]})]},"payment"),3===D&&e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Address"}),e.jsx("button",{onClick:()=>E(1),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),e.jsxs("div",{className:"text-purple-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:O.fullName}),e.jsx("p",{children:O.address}),e.jsxs("p",{children:[O.city,", ",O.state," ",O.zipCode]}),e.jsx("p",{children:O.email}),e.jsx("p",{children:O.phone})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Method"}),e.jsx("button",{onClick:()=>E(2),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),"card"===S?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"text-3xl text-purple-400"}),e.jsxs("div",{className:"text-purple-300",children:[e.jsxs("p",{className:"font-semibold",children:["**** **** **** ",Z.cardNumber.replace(/\s/g,"").slice(-4)]}),e.jsxs("p",{className:"text-sm",children:["Expires ",Z.expiryDate]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(m,{className:"text-2xl text-green-400"})}),e.jsxs("div",{className:"text-purple-300",children:[e.jsx("p",{className:"font-semibold text-green-400",children:"Cash on Delivery"}),e.jsxs("p",{className:"text-sm",children:["Pay $",T.toFixed(2)," when delivered"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{variant:"glass",onClick:()=>E(2),children:"Back"}),e.jsx(x,{variant:"3d",fullWidth:!0,onClick:async()=>{$(!0);try{const e={orderNumber:`NXS${Date.now().toString().slice(-8)}`,orderItems:C.map(e=>{var t,s,r;let a=null;e.product&&"object"==typeof e.product?a=e.product._id:e.product&&"string"==typeof e.product?a=e.product:e._id&&(a=e._id);const l=e.price||0,i=e.quantity||1;return{product:a,name:(null==(t=e.product)?void 0:t.name)||e.name||"Product",price:l,quantity:i,image:(null==(r=null==(s=e.product)?void 0:s.images)?void 0:r[0])||e.image||"",finalPrice:l*i}}),shippingInfo:{firstName:O.fullName.split(" ")[0]||"Customer",lastName:O.fullName.split(" ").slice(1).join(" ")||"User",email:O.email,phone:O.phone.replace(/-/g,"")||"0000000000",address:{street:O.address||"N/A",city:O.city||"N/A",state:O.state||"N/A",country:O.country||"Pakistan",zipCode:O.zipCode||"00000"}},paymentInfo:{method:"cod"===S?"cash":"card",provider:"cod"===S?"cod":"stripe",transactionId:"cod"===S?`cod_${Date.now()}`:`txn_${Date.now()}`,status:"cod"===S?"pending":"completed"},pricing:{itemsPrice:B,taxPrice:V,shippingPrice:R,discountPrice:0,totalPrice:T}},t=await v(u(e)).unwrap();v(h()),y.success("ðŸŽ‰ Order placed successfully!",{style:{background:"linear-gradient(135deg, rgb(34, 197, 94), rgb(21, 128, 61))",color:"#fff",borderRadius:"12px"}}),w("/order-confirmation",{state:{orderData:{orderId:t.order._id,...t.order,shippingInfo:O,items:C,subtotal:B,shipping:R,tax:V,total:T}}})}catch(e){y.error(e||"Failed to place order. Please try again.")}finally{$(!1)}},disabled:P,icon:P?null:c,children:P?"Processing...":"Place Order"})]})]},"review")]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass-card p-6 rounded-2xl sticky top-24",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto",children:C.map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-300 text-sm font-semibold line-clamp-2",children:t.name}),e.jsxs("p",{className:"text-purple-300/70 text-sm",children:["Qty: ",t.quantity]}),e.jsxs("p",{className:"text-cyan-400 font-bold",children:["$",(t.price*t.quantity).toFixed(2)]})]})]},t.product))}),e.jsxs("div",{className:"space-y-3 border-t border-purple-500/30 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",B.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"font-semibold",children:0===R?e.jsx("span",{className:"text-green-400",children:"FREE"}):`$${R.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"font-semibold",children:["$",V.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-purple-500/30 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold text-purple-300",children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold gradient-text",children:["$",T.toFixed(2)]})]})})]})]})})]})]})})]}):e.jsx(a,{text:"Loading checkout..."})};export{v as default};
