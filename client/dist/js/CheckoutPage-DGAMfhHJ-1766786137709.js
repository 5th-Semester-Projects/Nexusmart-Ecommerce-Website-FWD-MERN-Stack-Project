import{j as e}from"./three-vendor-bjZzPjU0-1766786137709.js";import{r as t,u as s,b as a}from"./react-vendor-Jz9jFFXE-1766786137709.js";import{v as r,m as l,g as i,aF as n,Z as c,aG as d,T as o,aH as x,aE as p,s as m,aI as u,h,r as g,d as b,p as y,aJ as j,P as f,H as N,aK as v,aL as w,aM as D,B as C,u as S,aN as k,aO as P}from"./index-DMhRWCfX-1766786137709.js";import{k as E,u as $}from"./redux-vendor-_0Sh0lKG-1766786137709.js";import{m as z,A as F,z as T}from"./ui-vendor-CtVfJpNo-1766786137709.js";import{M as A}from"./MagicalGenie-C0Jgxtln-1766786137709.js";const M={local:{baseRate:0,minDays:1,maxDays:2},regional:{baseRate:100,minDays:2,maxDays:4},national:{baseRate:200,minDays:3,maxDays:7},international:{baseRate:1500,minDays:7,maxDays:21}},R=[{id:"standard",name:"Standard Delivery",multiplier:1,icon:r,description:"Regular delivery",color:"purple"},{id:"express",name:"Express Delivery",multiplier:1.5,icon:l,description:"2x faster delivery",color:"cyan"},{id:"same-day",name:"Same Day Delivery",multiplier:3,icon:i,description:"Get it today!",localOnly:!0,color:"yellow"},{id:"pickup",name:"Store Pickup",multiplier:0,icon:n,description:"Pick up from nearest store",color:"green"}],L=[{id:"morning",label:"Morning (9AM - 12PM)",icon:"ðŸŒ…",surcharge:0},{id:"afternoon",label:"Afternoon (12PM - 5PM)",icon:"â˜€ï¸",surcharge:0},{id:"evening",label:"Evening (5PM - 9PM)",icon:"ðŸŒ™",surcharge:50},{id:"any",label:"Any Time",icon:"â°",surcharge:0}],O={lahore:"local",faisalabad:"regional",rawalpindi:"regional",multan:"regional",karachi:"regional",islamabad:"regional",peshawar:"regional",quetta:"national"},I=5e3,H=({city:s,country:a="Pakistan",cartTotal:r,onShippingChange:i,selectedMethod:n="standard",selectedSlot:p="any",selectedDate:m=null})=>{const[u,h]=t.useState(n),[g,b]=t.useState(p),[y,j]=t.useState(m),[f,N]=t.useState(0),v=(()=>{if("pakistan"!==a.toLowerCase())return"international";const e=(null==s?void 0:s.toLowerCase().trim())||"";return O[e]||"national"})(),w=M[v],D=R.filter(e=>!e.localOnly||"local"===v);t.useEffect(()=>{if(!s)return;const e=R.find(e=>e.id===u)||R[0],t=L.find(e=>e.id===g)||L[3];let a=w.baseRate*e.multiplier;a+=t.surcharge;const l=r>=I&&"international"!==v&&"standard"===u;l&&(a=0),N(Math.round(a));let n=w.minDays,c=w.maxDays;"express"===u?(n=Math.ceil(n/2),c=Math.ceil(c/2)):"same-day"===u?(n=0,c=0):"pickup"===u&&(n=1,c=1);const d=new Date,o=new Date(d);o.setDate(d.getDate()+n);const x=new Date(d);x.setDate(d.getDate()+c),i&&i({method:u,methodName:e.name,timeSlot:g,slotLabel:t.label,date:y,cost:l?0:Math.round(a),zone:v,estimatedDelivery:{minDays:n,maxDays:c,minDate:o,maxDate:x},freeShipping:l})},[s,u,g,y,r,v]);const C=(()=>{const e=[],t=new Date;let s=w.minDays;"express"===u?s=Math.ceil(s/2):"same-day"===u&&(s=0);for(let a=s;a<s+7;a++){const s=new Date(t);s.setDate(t.getDate()+a),0===s.getDay()&&"same-day"!==u||e.push({date:s,formatted:s.toLocaleDateString("en-PK",{weekday:"short",month:"short",day:"numeric"}),isToday:0===a,isTomorrow:1===a})}return e})(),S=r>=I&&"international"!==v,k=I-r;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"text-cyan-400"}),e.jsx("span",{className:"text-white font-semibold",children:"Shipping Options"})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("local"===v?"bg-green-500/20 text-green-400":"regional"===v?"bg-cyan-500/20 text-cyan-400":"national"===v?"bg-purple-500/20 text-purple-400":"bg-red-500/20 text-red-400"),children:[v.charAt(0).toUpperCase()+v.slice(1)," Delivery"]})]}),!S&&"international"!==v&&"standard"===u&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-blue-900/50 p-4 rounded-xl border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-purple-300 text-sm",children:["Add Rs. ",k.toLocaleString()," more for FREE shipping!"]}),e.jsxs("span",{className:"text-cyan-400 text-sm font-medium",children:[Math.round(r/I*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-purple-900/50 rounded-full overflow-hidden",children:e.jsx(z.div,{initial:{width:0},animate:{width:`${Math.min(100,r/I*100)}%`},className:"h-full bg-gradient-to-r from-purple-500 to-cyan-500"})})]}),S&&"standard"===u&&e.jsxs(z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-500/20 p-4 rounded-xl border border-green-500/30 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"text-green-400 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-400 font-semibold",children:"ðŸŽ‰ You qualify for FREE shipping!"}),e.jsxs("p",{className:"text-green-300/70 text-sm",children:["Orders above Rs. ",I.toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 text-sm mb-3",children:"Delivery Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:D.map(t=>{const s=t.icon,a=u===t.id,r=0===t.multiplier?0:Math.round(w.baseRate*t.multiplier),l=S&&"standard"===t.id||0===t.multiplier;return e.jsxs(z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(t.id),className:"p-4 rounded-xl text-left transition-all "+(a?"bg-gradient-to-r from-purple-600/50 to-blue-600/50 border-2 border-cyan-500":"bg-purple-900/30 border-2 border-transparent hover:border-purple-500/50"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+(a?"bg-cyan-500/30":"bg-purple-500/20"),children:e.jsx(s,{className:a?"text-cyan-400":"text-purple-400"})}),a&&e.jsx(c,{className:"text-cyan-400"})]}),e.jsx("p",{className:"font-semibold mt-2 "+(a?"text-white":"text-purple-300"),children:t.name}),e.jsx("p",{className:"text-purple-400/70 text-xs mt-1",children:t.description}),e.jsx("p",{className:"mt-2 font-bold "+(l?"text-green-400":"text-cyan-400"),children:l?"FREE":`Rs. ${r}`})]},t.id)})})]}),"pickup"!==u&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-purple-300 text-sm mb-3",children:[e.jsx(d,{className:"inline mr-2"}),"Preferred Delivery Date"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:C.map((t,s)=>e.jsxs(z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(t.date),className:"flex-shrink-0 px-4 py-3 rounded-xl text-center transition-all min-w-[100px] "+((null==y?void 0:y.toDateString())===t.date.toDateString()?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"),children:[e.jsx("p",{className:"text-xs opacity-70",children:t.isToday?"Today":t.isTomorrow?"Tomorrow":t.formatted.split(" ")[0]}),e.jsx("p",{className:"font-bold text-lg",children:t.formatted.split(" ").slice(1).join(" ")})]},s))})]}),"pickup"!==u&&"same-day"!==u&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-purple-300 text-sm mb-3",children:[e.jsx(o,{className:"inline mr-2"}),"Preferred Time Slot"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:L.map(t=>{const s=g===t.id;return e.jsxs(z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b(t.id),className:"p-3 rounded-xl flex items-center gap-3 transition-all "+(s?"bg-gradient-to-r from-purple-600/50 to-blue-600/50 border-2 border-cyan-500":"bg-purple-900/30 border-2 border-transparent hover:border-purple-500/50"),children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-sm font-medium "+(s?"text-white":"text-purple-300"),children:t.label}),t.surcharge>0&&e.jsxs("p",{className:"text-xs text-yellow-400",children:["+Rs. ",t.surcharge]})]}),s&&e.jsx(c,{className:"text-cyan-400"})]},t.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-900/80 to-purple-900/30 p-4 rounded-xl border border-purple-500/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"text-cyan-400"}),e.jsx("span",{className:"text-purple-300",children:"Shipping Cost"})]}),e.jsx("span",{className:"text-xl font-bold "+(0===f?"text-green-400":"text-cyan-400"),children:0===f?"FREE":`Rs. ${f}`})]}),y&&e.jsxs("p",{className:"text-purple-400/70 text-sm mt-2",children:["Estimated delivery: ",y.toLocaleDateString("en-PK",{weekday:"long",month:"long",day:"numeric"})]})]})]})},Z=({cartTotal:s=0,onApply:a,appliedCoupon:r=null,onRemove:l})=>{const[i,n]=t.useState(""),[c,d]=t.useState(!1),[o,x]=t.useState(""),[y,j]=t.useState(!1),[f,N]=t.useState([]);t.useEffect(()=>{(async()=>{try{const{data:e}=await b.get("/coupons/available");N(e.coupons||[])}catch(e){}})()},[]);return e.jsx("div",{className:"space-y-4",children:r?e.jsxs(z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/20 flex items-center justify-center",children:e.jsx(p,{className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-400",children:r.code}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saving Rs. ",r.discount.toLocaleString()]})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(m,{className:"text-gray-400 hover:text-red-400"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(p,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:e=>{n(e.target.value.toUpperCase()),x("")},placeholder:"Enter coupon code",className:"w-full pl-12 pr-4 py-3 bg-white/5 border rounded-xl text-white placeholder-gray-500 focus:ring-1 outline-none uppercase "+(o?"border-red-500 focus:ring-red-500":"border-white/10 focus:border-cyan-500 focus:ring-cyan-500")})]}),e.jsx("button",{onClick:async()=>{var e,t;if(i.trim()){d(!0),x("");try{const{data:e}=await b.post("/coupons/validate",{code:i.toUpperCase(),cartTotal:s});e.valid&&(null==a||a({code:e.coupon.code,discount:e.discount,discountType:e.coupon.discountType,discountValue:e.coupon.discountValue}),T.success(`Coupon applied! You save Rs. ${e.discount.toLocaleString()}`),n(""))}catch(r){const s=(null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Invalid coupon code";x(s),T.error(s)}finally{d(!1)}}else x("Please enter a coupon code")},disabled:c,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-cyan-600 text-white rounded-xl font-medium disabled:opacity-50 flex items-center gap-2",children:c?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Apply"})]}),o&&e.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-1",children:[e.jsx(u,{}),o]}),f.length>0&&e.jsxs("button",{onClick:()=>j(!y),className:"flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[e.jsx(h,{}),"View ",f.length," available coupon",f.length>1?"s":"",e.jsx(g,{className:"transition-transform "+(y?"rotate-180":"")})]}),e.jsx(F,{children:y&&e.jsx(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:f.map(t=>e.jsx(q,{coupon:t,onSelect:()=>(e=>{n(e.code),j(!1)})(t),cartTotal:s,compact:!0},t._id||t.code))})})]})})},q=({coupon:s,onSelect:a,onCopy:r,cartTotal:l=0,compact:i=!1})=>{const[n,d]=t.useState(!1),x=!s.minPurchase||l>=s.minPurchase,m=s.expiresAt?Math.ceil((new Date(s.expiresAt)-new Date)/864e5):null,u="percentage"===s.discountType?`${s.discountValue}% OFF`:`Rs. ${s.discountValue.toLocaleString()} OFF`;return i?e.jsxs(z.div,{whileHover:{scale:1.01},onClick:()=>x&&(null==a?void 0:a()),className:"flex items-center justify-between p-3 rounded-xl border transition-all cursor-pointer "+(x?"bg-white/5 border-white/10 hover:border-cyan-500/50":"bg-gray-800/50 border-gray-700 opacity-60 cursor-not-allowed"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+("percentage"===s.discountType?"bg-purple-500/20 text-purple-400":"bg-cyan-500/20 text-cyan-400"),children:"percentage"===s.discountType?e.jsx(y,{}):e.jsx(p,{})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-white",children:s.code}),e.jsx("span",{className:"text-sm text-green-400",children:u})]}),s.minPurchase&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Min. purchase Rs. ",s.minPurchase.toLocaleString()]})]})]}),x?e.jsx("button",{onClick:e=>{e.stopPropagation(),null==a||a()},className:"px-3 py-1 bg-cyan-600 hover:bg-cyan-500 text-white text-sm rounded-lg transition-colors",children:"Apply"}):e.jsx("span",{className:"text-xs text-gray-500",children:"Not eligible"})]}):e.jsxs(z.div,{whileHover:{scale:1.02},className:"relative overflow-hidden bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border border-white/10",children:[e.jsx("div",{className:"absolute -left-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-gray-950 rounded-full"}),e.jsx("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-gray-950 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-6 right-6 border-t border-dashed border-white/10",style:{top:"50%"}}),e.jsx("div",{className:"p-5 pb-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold mb-3 "+("percentage"===s.discountType?"bg-purple-500/20 text-purple-400":"bg-cyan-500/20 text-cyan-400"),children:["percentage"===s.discountType?e.jsx(y,{}):e.jsx(p,{}),u]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s.description||"Special Discount"}),s.minPurchase&&e.jsxs("p",{className:"text-sm text-gray-400",children:["On orders above Rs. ",s.minPurchase.toLocaleString()]})]}),null!==m&&m<=7&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-500/20 text-red-400 rounded-lg text-xs",children:[e.jsx(o,{}),m<=0?"Expires today":`${m} days left`]})]})}),e.jsxs("div",{className:"p-5 pt-6 bg-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-mono font-bold text-white bg-white/10 px-4 py-2 rounded-xl",children:s.code}),e.jsx("button",{onClick:async e=>{e.stopPropagation();try{await navigator.clipboard.writeText(s.code),d(!0),T.success("Coupon code copied!"),setTimeout(()=>d(!1),2e3),null==r||r()}catch(t){T.error("Failed to copy")}},className:"p-2 rounded-xl transition-colors "+(n?"bg-green-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:n?e.jsx(c,{}):e.jsx(j,{})})]}),e.jsx("button",{onClick:()=>null==a?void 0:a(),disabled:!x,className:"px-5 py-2 rounded-xl font-medium transition-all "+(x?"bg-gradient-to-r from-purple-600 to-cyan-600 text-white hover:shadow-lg hover:shadow-purple-500/30":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:x?"Use Coupon":"Not Eligible"})]}),s.maxDiscount&&e.jsxs("div",{className:"absolute top-3 right-3 px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-lg text-xs",children:["Max Rs. ",s.maxDiscount.toLocaleString()," off"]})]})},V=()=>{const r=E(),i=s(),{items:n}=$(e=>e.cart),{user:p,isAuthenticated:m}=$(e=>e.auth),[h,g]=t.useState(1),[b,y]=t.useState(!1),[j,M]=t.useState("card"),[R,L]=t.useState({}),[O,I]=t.useState({method:"standard",methodName:"Standard Delivery",timeSlot:"any",slotLabel:"Any Time",date:null,cost:0,zone:"national",freeShipping:!1}),[q,V]=t.useState(null),[Y,_]=t.useState(0),[K,B]=t.useState(!1),[U,W]=t.useState(null),[G,J]=t.useState({fullName:(null==p?void 0:p.name)||"",email:(null==p?void 0:p.email)||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"Pakistan"}),[Q,X]=t.useState({cardNumber:"",cardName:"",expiryDate:"",cvv:"",saveCard:!1}),ee={fullName:/^[a-zA-Z\s]{3,50}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^(\+92|0)?[0-9]{10}$/,address:/^.{10,100}$/,city:/^[a-zA-Z\s]{2,30}$/,state:/^[a-zA-Z\s]{2,30}$/,zipCode:/^[0-9]{5}$/,cardNumber:/^[0-9]{16}$/,cardName:/^[a-zA-Z\s]{3,50}$/,expiryDate:/^(0[1-9]|1[0-2])\/([0-9]{2})$/,cvv:/^[0-9]{3,4}$/},te=(e,t)=>{let s=t;if("phone"===e&&(s=t.replace(/[-\s]/g,"")),"cardNumber"===e&&(s=t.replace(/\s/g,"")),!s||""===s.trim())return"This field is required";if(ee[e]&&!ee[e].test(s))switch(e){case"fullName":return"Enter valid name (3-50 letters only)";case"email":return"Enter valid email (e.g., name@example.com)";case"phone":return"Enter valid Pakistani phone (e.g., 0300-1234567)";case"address":return"Address must be 10-100 characters";case"city":return"Enter valid city name";case"state":return"Enter valid state/province name";case"zipCode":return"Enter 5-digit ZIP code (e.g., 54000)";case"cardNumber":return"Enter 16-digit card number";case"cardName":return"Enter cardholder name as on card";case"expiryDate":return"Enter valid date (MM/YY)";case"cvv":return"Enter 3 or 4 digit CVV";default:return"Invalid format"}if("expiryDate"===e&&ee[e].test(s)){const[e,t]=s.split("/");if(new Date(2e3+parseInt(t),parseInt(e)-1)<new Date)return"Card has expired"}return""},se=e=>{const{name:t,value:s}=e.target;let a=s;"phone"===t&&(a=(e=>{const t=e.replace(/\D/g,"");return t.length<=4?t:t.length<=7?`${t.slice(0,4)}-${t.slice(4)}`:`${t.slice(0,4)}-${t.slice(4,11)}`})(s)),"zipCode"===t&&(a=s.replace(/\D/g,"").slice(0,5)),"fullName"!==t&&"city"!==t&&"state"!==t||(a=s.replace(/[^a-zA-Z\s]/g,"")),J({...G,[t]:a}),R[t]&&L({...R,[t]:""})},ae=e=>{const{name:t,value:s}=e.target;let a=s;"cardNumber"===t&&(a=(e=>{const t=e.replace(/\D/g,""),s=t.match(/.{1,4}/g);return s?s.join(" "):t})(s),a.replace(/\s/g,"").length>16)||"expiryDate"===t&&(a=(e=>{const t=e.replace(/\D/g,"");return t.length>=2?`${t.slice(0,2)}/${t.slice(2,4)}`:t})(s),a.length>5)||("cvv"===t&&(a=s.replace(/\D/g,"").slice(0,4)),"cardName"===t&&(a=s.replace(/[^a-zA-Z\s]/g,"")),X({...Q,[t]:a}),R[t]&&L({...R,[t]:""}))};t.useEffect(()=>{m||i("/login?redirect=/checkout"),n&&0!==n.length||i("/cart")},[m,n,i]);const re=(null==n?void 0:n.reduce((e,t)=>e+t.price*t.quantity,0))||0,le=O.cost||(re>100?0:15),ie=.1*(re-Y),ne=re-Y+le+ie,ce=[{id:1,name:"Shipping",icon:w},{id:2,name:"Delivery",icon:l},{id:3,name:"Payment",icon:D},{id:4,name:"Review",icon:c}];return n&&0!==n.length?e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:"Checkout - NexusMart"})}),e.jsx("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-gray-950 via-purple-950/10 to-gray-950"}),e.jsx(A,{}),e.jsx("div",{className:"min-h-screen py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",style:{fontFamily:"Orbitron, sans-serif"},children:e.jsx("span",{className:"gradient-text",children:"Secure Checkout"})}),e.jsxs("div",{className:"flex items-center space-x-2 text-purple-300/70",children:[e.jsx(v,{className:"text-green-400"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]})]}),e.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:e.jsx("div",{className:"glass-card p-6 rounded-2xl",children:e.jsx("div",{className:"flex justify-between items-center",children:ce.map((t,s)=>e.jsxs(a.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx(z.div,{whileHover:{scale:1.05},className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-3 transition-all duration-300 "+(h>=t.id?"bg-gradient-to-r from-purple-600 to-blue-600 shadow-lg shadow-purple-500/50":"bg-purple-500/10 border-2 border-purple-500/30"),children:e.jsx(t.icon,{className:"text-2xl "+(h>=t.id?"text-white":"text-purple-400")})}),e.jsx("span",{className:"text-sm font-semibold "+(h>=t.id?"text-cyan-400":"text-purple-300/50"),children:t.name})]}),s<ce.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-4 rounded-full transition-all duration-300 "+(h>t.id?"bg-gradient-to-r from-purple-600 to-blue-600":"bg-purple-500/20")})]},t.id))})})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(F,{mode:"wait",children:[1===h&&e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Information"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t={};if(["fullName","email","phone","address","city","state","zipCode"].forEach(e=>{const s=te(e,G[e]);s&&(t[e]=s)}),Object.keys(t).length>0)return L(t),void T.error("Please fix the errors in the form");g(2)},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",value:G.fullName,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.fullName?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Ahmed Khan"}),R.fullName&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.fullName]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Only letters and spaces allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:G.email,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.email?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., ahmed@email.com"}),R.email&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.email]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:G.phone,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.phone?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 0300-1234567",maxLength:"12"}),R.phone&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.phone]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Pakistani format: 0300-1234567 or +923001234567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Street Address *"}),e.jsx("input",{type:"text",name:"address",value:G.address,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.address?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., House 123, Street 45, Block A, DHA Phase 5"}),R.address&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.address]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Complete address with house/flat number, street, block/sector"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"City *"}),e.jsx("input",{type:"text",name:"city",value:G.city,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.city?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Lahore"}),R.city&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.city]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Province *"}),e.jsx("input",{type:"text",name:"state",value:G.state,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.state?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., Punjab"}),R.state&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.state]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"ZIP Code *"}),e.jsx("input",{type:"text",name:"zipCode",value:G.zipCode,onChange:se,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.zipCode?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 54000",maxLength:"5"}),R.zipCode&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.zipCode]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"5-digit postal code"})]})]}),e.jsx(C,{type:"submit",variant:"3d",fullWidth:!0,icon:S,children:"Continue to Delivery Options"})]})]},"shipping"),2===h&&e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsxs("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:[e.jsx(l,{className:"inline mr-3"}),"Delivery Options"]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),g(3)},className:"space-y-6",children:[e.jsx(H,{city:G.city,country:G.country,cartTotal:re,onShippingChange:e=>{I(e)},selectedMethod:O.method,selectedSlot:O.timeSlot,selectedDate:O.date}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(C,{variant:"glass",onClick:()=>g(1),children:"Back"}),e.jsx(C,{type:"submit",variant:"3d",fullWidth:!0,icon:S,children:"Continue to Payment"})]})]})]},"delivery"),3===h&&e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"glass-card p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Method"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{onClick:()=>M("card"),className:"p-6 rounded-xl cursor-pointer transition-all duration-300 border-2 "+("card"===j?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 border-cyan-500 shadow-lg shadow-cyan-500/20":"bg-gray-900/30 border-purple-500/30 hover:border-purple-500/50"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("card"===j?"bg-cyan-500":"bg-purple-500/30"),children:e.jsx(D,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"Credit/Debit Card"}),e.jsx("p",{className:"text-purple-300/70 text-sm",children:"Pay securely with card"})]})]})}),e.jsx("div",{onClick:()=>M("cod"),className:"p-6 rounded-xl cursor-pointer transition-all duration-300 border-2 "+("cod"===j?"bg-gradient-to-r from-green-600/30 to-emerald-600/30 border-green-500 shadow-lg shadow-green-500/20":"bg-gray-900/30 border-purple-500/30 hover:border-purple-500/50"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("cod"===j?"bg-green-500":"bg-purple-500/30"),children:e.jsx(x,{className:"text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"Cash on Delivery"}),e.jsx("p",{className:"text-purple-300/70 text-sm",children:"Pay when you receive"})]})]})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),"cod"===j)return void g(4);const t={};if(["cardNumber","cardName","expiryDate","cvv"].forEach(e=>{const s=te(e,Q[e]);s&&(t[e]=s)}),Object.keys(t).length>0)return L(t),void T.error("Please fix the errors in the form");g(4)},className:"space-y-6",children:["card"===j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",name:"cardNumber",value:Q.cardNumber,onChange:ae,maxLength:"19",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.cardNumber?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 4111 1111 1111 1111"}),R.cardNumber&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.cardNumber]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"16 digits, spaces auto-added"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",name:"cardName",value:Q.cardName,onChange:ae,className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.cardName?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., AHMED KHAN (as printed on card)"}),R.cardName&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.cardName]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Name exactly as on the card"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"Expiry Date *"}),e.jsx("input",{type:"text",name:"expiryDate",value:Q.expiryDate,onChange:ae,maxLength:"5",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.expiryDate?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 12/25"}),R.expiryDate&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.expiryDate]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"Month/Year format"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-purple-300 font-semibold mb-2",children:"CVV *"}),e.jsx("input",{type:"password",name:"cvv",value:Q.cvv,onChange:ae,maxLength:"4",className:"w-full px-4 py-3 bg-gray-900/50 border-2 rounded-xl text-white focus:outline-none transition-all duration-300 relative z-10 cursor-text "+(R.cvv?"border-red-500":"border-purple-500/30 focus:border-cyan-500"),style:{pointerEvents:"auto"},placeholder:"e.g., 123"}),R.cvv&&e.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[e.jsx(u,{})," ",R.cvv]}),e.jsx("p",{className:"text-purple-400/50 text-xs mt-1",children:"3-4 digits on back of card"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Q.saveCard,onChange:e=>X({...Q,saveCard:e.target.checked}),className:"w-5 h-5 rounded border-2 border-purple-500/30 bg-gray-900/50 text-purple-600 focus:ring-2 focus:ring-purple-500/50"}),e.jsx("span",{className:"text-purple-300",children:"Save card for future purchases"})]})]}):e.jsx("div",{className:"p-6 bg-green-500/10 border-2 border-green-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(c,{className:"text-2xl text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-400 font-bold text-lg mb-2",children:"Cash on Delivery Selected"}),e.jsxs("p",{className:"text-green-300/70",children:["You will pay ",e.jsxs("span",{className:"font-bold text-white",children:["$",ne.toFixed(2)]})," in cash when your order is delivered."]}),e.jsxs("ul",{className:"mt-3 space-y-1 text-green-300/70 text-sm",children:[e.jsx("li",{children:"âœ“ No advance payment required"}),e.jsx("li",{children:"âœ“ Pay only when you receive the order"}),e.jsx("li",{children:"âœ“ Inspect items before paying"})]})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(C,{variant:"glass",onClick:()=>g(2),children:"Back"}),e.jsx(C,{type:"submit",variant:"3d",fullWidth:!0,icon:S,children:"Review Order"})]})]})]},"payment"),4===h&&e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Shipping Address"}),e.jsx("button",{onClick:()=>g(1),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),e.jsxs("div",{className:"text-purple-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:G.fullName}),e.jsx("p",{children:G.address}),e.jsxs("p",{children:[G.city,", ",G.state," ",G.zipCode]}),e.jsx("p",{children:G.email}),e.jsx("p",{children:G.phone})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:[e.jsx(l,{className:"inline mr-2"}),"Delivery Options"]}),e.jsx("button",{onClick:()=>g(2),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),e.jsxs("div",{className:"text-purple-300 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"text-cyan-400"}),e.jsx("span",{children:O.methodName}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs "+(O.freeShipping?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-300"),children:O.freeShipping?"FREE":`Rs. ${O.cost}`})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"text-cyan-400"}),e.jsx("span",{children:O.slotLabel})]}),O.date&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"text-cyan-400"}),e.jsx("span",{children:new Date(O.date).toLocaleDateString("en-PK",{weekday:"long",month:"long",day:"numeric"})})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",style:{fontFamily:"Orbitron, sans-serif"},children:"Payment Method"}),e.jsx("button",{onClick:()=>g(3),className:"text-cyan-400 hover:text-cyan-300 text-sm font-semibold",children:"Edit"})]}),"card"===j?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"text-3xl text-purple-400"}),e.jsxs("div",{className:"text-purple-300",children:[e.jsxs("p",{className:"font-semibold",children:["**** **** **** ",Q.cardNumber.replace(/\s/g,"").slice(-4)]}),e.jsxs("p",{className:"text-sm",children:["Expires ",Q.expiryDate]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(x,{className:"text-2xl text-green-400"})}),e.jsxs("div",{className:"text-purple-300",children:[e.jsx("p",{className:"font-semibold text-green-400",children:"Cash on Delivery"}),e.jsxs("p",{className:"text-sm",children:["Pay $",ne.toFixed(2)," when delivered"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(C,{variant:"glass",onClick:()=>g(3),children:"Back"}),e.jsx(C,{variant:"3d",fullWidth:!0,onClick:async()=>{y(!0);try{const e={orderNumber:`NXS${Date.now().toString().slice(-8)}`,orderItems:n.map(e=>{var t,s,a;let r=null;e.product&&"object"==typeof e.product?r=e.product._id:e.product&&"string"==typeof e.product?r=e.product:e._id&&(r=e._id);const l=e.price||0,i=e.quantity||1;return{product:r,name:(null==(t=e.product)?void 0:t.name)||e.name||"Product",price:l,quantity:i,image:(null==(a=null==(s=e.product)?void 0:s.images)?void 0:a[0])||e.image||"",finalPrice:l*i}}),shippingInfo:{firstName:G.fullName.split(" ")[0]||"Customer",lastName:G.fullName.split(" ").slice(1).join(" ")||"User",email:G.email,phone:G.phone.replace(/-/g,"")||"0000000000",address:{street:G.address||"N/A",city:G.city||"N/A",state:G.state||"N/A",country:G.country||"Pakistan",zipCode:G.zipCode||"00000"},savedAddressId:(null==U?void 0:U._id)||null},deliveryTimeSlot:{date:O.date,slot:O.timeSlot,slotLabel:O.slotLabel},shippingMethod:{type:O.method,name:O.methodName,cost:O.cost},shippingZone:{zone:O.zone,city:G.city},paymentInfo:{method:"cod"===j?"cod":"card",provider:"cod"===j?"cod":"stripe",transactionId:"cod"===j?`cod_${Date.now()}`:`txn_${Date.now()}`,status:"cod"===j?"pending":"completed"},pricing:{itemsPrice:re,taxPrice:ie,shippingPrice:le,discountPrice:Y,couponCode:(null==q?void 0:q.code)||null,totalPrice:ne}},t=await r(k(e)).unwrap();r(P()),T.success("ðŸŽ‰ Order placed successfully!",{style:{background:"linear-gradient(135deg, rgb(34, 197, 94), rgb(21, 128, 61))",color:"#fff",borderRadius:"12px"}}),i("/order-confirmation",{state:{orderData:{orderId:t.order._id,...t.order,shippingInfo:G,items:n,subtotal:re,shipping:le,tax:ie,total:ne}}})}catch(e){T.error(e||"Failed to place order. Please try again.")}finally{y(!1)}},disabled:b,icon:b?null:c,children:b?"Processing...":"Place Order"})]})]},"review")]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass-card p-6 rounded-2xl sticky top-24",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-6",style:{fontFamily:"Orbitron, sans-serif"},children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto",children:n.map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-300 text-sm font-semibold line-clamp-2",children:t.name}),e.jsxs("p",{className:"text-purple-300/70 text-sm",children:["Qty: ",t.quantity]}),e.jsxs("p",{className:"text-cyan-400 font-bold",children:["$",(t.price*t.quantity).toFixed(2)]})]})]},t.product))}),e.jsxs("div",{className:"space-y-3 border-t border-purple-500/30 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",re.toFixed(2)]})]}),e.jsx(Z,{cartTotal:re,onCouponApplied:e=>{V(e),_(e.discount),T.success(`ðŸŽ‰ Coupon applied! You save $${e.discount.toFixed(2)}`,{style:{background:"linear-gradient(135deg, rgb(34, 197, 94), rgb(21, 128, 61))",color:"#fff",borderRadius:"12px"}})},onCouponRemoved:()=>{V(null),_(0)}}),Y>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsxs("span",{className:"flex items-center gap-2",children:["Discount",q&&e.jsx("span",{className:"text-xs bg-green-500/20 px-2 py-0.5 rounded",children:q.code})]}),e.jsxs("span",{className:"font-semibold",children:["-$",Y.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"font-semibold",children:0===le?e.jsx("span",{className:"text-green-400",children:"FREE"}):`$${le.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-purple-300",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"font-semibold",children:["$",ie.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-purple-500/30 pt-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold text-purple-300",children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold gradient-text",children:["$",ne.toFixed(2)]})]}),Y>0&&e.jsxs("p",{className:"text-green-400 text-sm mt-1 text-right",children:["You're saving $",Y.toFixed(2),"! ðŸŽ‰"]})]})]})]})})]})]})})]}):e.jsx(f,{text:"Loading checkout..."})};export{V as default};
