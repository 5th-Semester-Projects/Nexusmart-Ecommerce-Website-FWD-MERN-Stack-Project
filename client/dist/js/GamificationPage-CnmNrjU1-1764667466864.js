import{j as e}from"./three-vendor-DbyMKvOn-1764667466864.js";import{r as t}from"./react-vendor-Jz9jFFXE-1764667466864.js";import{b3 as a,a as s,b4 as r,b5 as n,b6 as i,b7 as l,b8 as o,b9 as c,ba as d,bb as m,F as u,bc as h,bd as x,be as p,bf as f,bg as g,bh as b,bi as y,bj as v,bk as w,bl as j,aa as N,bm as M,bn as k,bo as C,ar as S}from"./index-CjIQkXAQ-1764667466864.js";import{u as R}from"./redux-vendor-BGaBRFUq-1764667466864.js";import{m as F,z as T,A as P}from"./ui-vendor-DRm4z2cq-1764667466864.js";const E=()=>{const{user:c}=R(e=>e.auth),[d,m]=t.useState(null),[u,h]=t.useState(!0),[x,p]=t.useState(100);t.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:e}=await a.get("/api/v1/gamification/loyalty-points");m(e.data)}catch(e){}finally{h(!1)}},g={Bronze:"from-amber-600 to-amber-800",Silver:"from-gray-400 to-gray-600",Gold:"from-yellow-400 to-yellow-600",Platinum:"from-purple-400 to-purple-600",Diamond:"from-cyan-400 to-blue-600"},b={Bronze:l,Silver:i,Gold:n,Platinum:r,Diamond:s};if(u)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})});const y=b[null==d?void 0:d.tier]||l;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 rounded-2xl p-6 shadow-2xl",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r ${g[null==d?void 0:d.tier]} mb-4`,children:e.jsx(y,{className:"text-4xl text-white"})}),e.jsxs("h2",{className:"text-3xl font-bold text-white mb-2",children:[null==d?void 0:d.tier," Member"]}),e.jsx("p",{className:"text-gray-400",children:"Keep shopping to unlock more rewards!"})]}),e.jsxs(F.div,{initial:{scale:.9},animate:{scale:1},className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-200 text-sm",children:"Available Points"}),e.jsx("p",{className:"text-4xl font-bold text-white",children:(null==d?void 0:d.points)||0})]}),e.jsx(i,{className:"text-6xl text-yellow-300 opacity-50"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-purple-200 text-sm",children:"Lifetime Earnings"}),e.jsxs("p",{className:"text-xl font-semibold text-white",children:[(null==d?void 0:d.lifetimePoints)||0," points"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[e.jsx("span",{children:null==d?void 0:d.tier}),e.jsx("span",{children:null==d?void 0:d.nextTier})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(F.div,{initial:{width:0},animate:{width:`${(null==d?void 0:d.tierProgress)||0}%`},transition:{duration:1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${g[null==d?void 0:d.nextTier]}`})}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2 text-center",children:[null==d?void 0:d.pointsToNextTier," points to ",null==d?void 0:d.nextTier]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"text-pink-500"})," Redeem Points"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:x,onChange:e=>p(Math.max(100,parseInt(e.target.value)||0)),min:"100",step:"50",className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{onClick:async()=>{var e,t;try{const{data:e}=await a.post("/api/v1/gamification/redeem-points",{points:x});T.success(`Successfully redeemed ${x} points for Rs. ${e.discount} discount!`),f()}catch(s){T.error((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"Failed to redeem points")}},disabled:(null==d?void 0:d.points)<x,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold disabled:opacity-50 hover:opacity-90 transition-opacity",children:"Redeem"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"100 points = Rs. 10 discount (Min. 100 points required)"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"How to Earn Points"}),e.jsx("div",{className:"space-y-3",children:[{action:"Every Rs. 100 spent",points:"10 points"},{action:"Write a review",points:"50 points"},{action:"Refer a friend",points:"200 points"},{action:"Daily check-in",points:"5 points"},{action:"Complete profile",points:"100 points"}].map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-300",children:t.action}),e.jsx("span",{className:"text-purple-400 font-semibold",children:t.points})]},a))})]})]})},I=()=>{const[i,o]=t.useState([]),[y,v]=t.useState(!0),[w,j]=t.useState(null);t.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:e}=await a.get("/api/v1/gamification/achievements");o(e.achievements)}catch(e){o(M)}finally{v(!1)}},M=[{id:1,name:"First Purchase",description:"Made your first purchase",icon:"FaShoppingBag",unlocked:!0,progress:100,rarity:"common"},{id:2,name:"Review Master",description:"Write 10 product reviews",icon:"FaComment",unlocked:!0,progress:100,rarity:"uncommon"},{id:3,name:"Social Butterfly",description:"Share 5 products on social media",icon:"FaShare",unlocked:!1,progress:60,rarity:"uncommon"},{id:4,name:"Loyal Customer",description:"Make 20 purchases",icon:"FaCrown",unlocked:!1,progress:45,rarity:"rare"},{id:5,name:"Wishlist Collector",description:"Add 50 items to wishlist",icon:"FaHeart",unlocked:!1,progress:30,rarity:"uncommon"},{id:6,name:"Referral King",description:"Refer 10 friends",icon:"FaUserFriends",unlocked:!1,progress:20,rarity:"rare"},{id:7,name:"Speed Shopper",description:"Complete checkout in under 1 minute",icon:"FaBolt",unlocked:!0,progress:100,rarity:"rare"},{id:8,name:"Big Spender",description:"Spend Rs. 50,000 total",icon:"FaGem",unlocked:!1,progress:70,rarity:"epic"},{id:9,name:"Early Bird",description:"Be first to buy a new product",icon:"FaRocket",unlocked:!1,progress:0,rarity:"legendary"},{id:10,name:"Champion",description:"Unlock all achievements",icon:"FaTrophy",unlocked:!1,progress:25,rarity:"legendary"}],k={FaShoppingBag:g,FaComment:f,FaShare:p,FaCrown:n,FaHeart:x,FaUserFriends:h,FaBolt:u,FaGem:m,FaRocket:d,FaTrophy:r,FaStar:l,FaFire:s,FaMedal:c},C={common:"from-gray-400 to-gray-600",uncommon:"from-green-400 to-green-600",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-yellow-400 to-orange-500"},S={common:"shadow-gray-500/30",uncommon:"shadow-green-500/30",rare:"shadow-blue-500/30",epic:"shadow-purple-500/30",legendary:"shadow-yellow-500/50"};if(y)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})});const R=i.length>0?i:M,T=R.filter(e=>e.unlocked).length;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-purple-900/50 to-gray-900 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(r,{className:"text-yellow-500"})," Achievements"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Unlock badges and earn rewards"})]}),e.jsx("div",{className:"bg-purple-600/20 px-4 py-2 rounded-full",children:e.jsxs("span",{className:"text-purple-400 font-semibold",children:[T,"/",R.length," Unlocked"]})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:R.map((t,a)=>{const s=k[t.icon]||l;return e.jsxs(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*a},whileHover:{scale:1.05},onClick:()=>j(t),className:"relative cursor-pointer rounded-xl p-4 "+(t.unlocked?`bg-gradient-to-br ${C[t.rarity]} shadow-lg ${S[t.rarity]}`:"bg-gray-800/50"),children:[!t.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 rounded-xl flex items-center justify-center",children:e.jsx(b,{className:"text-gray-500 text-2xl"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 "+(t.unlocked?"bg-white/20":"bg-gray-700"),children:e.jsx(s,{className:"text-2xl "+(t.unlocked?"text-white":"text-gray-500")})}),e.jsx("h3",{className:"text-sm font-semibold "+(t.unlocked?"text-white":"text-gray-500"),children:t.name}),!t.unlocked&&t.progress>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.progress,"%"]})]})]})]},t.id)})}),e.jsx(P,{children:w&&e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:e.jsx(F.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:`bg-gradient-to-br ${C[w.rarity]} p-6 rounded-2xl max-w-sm w-full text-center`,children:(()=>{const t=k[w.icon]||l;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(t,{className:"text-5xl text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:w.name}),e.jsx("p",{className:"text-white/80 mb-4",children:w.description}),e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold uppercase "+(w.unlocked?"bg-green-500 text-white":"bg-gray-600 text-gray-300"),children:w.unlocked?"Unlocked!":`${w.progress}% Complete`}),e.jsxs("p",{className:"text-white/60 text-sm mt-4 capitalize",children:[w.rarity," Badge"]})]})})()})})})]})};var B={};!function e(t,a,s,r){var n=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix;function l(){}function o(e){var s=a.exports.Promise,r=void 0!==s?s:t.Promise;return"function"==typeof r?new r(e):(e(l,l),null)}var c,d,m,u,h,x,p=function(e,t){return{transform:function(a){if(e)return a;if(t.has(a))return t.get(a);var s=new OffscreenCanvas(a.width,a.height);return s.getContext("2d").drawImage(a,0,0),t.set(a,s),s},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),a=e.getContext("2d");a.fillRect(0,0,1,1);var s=e.transferToImageBitmap();a.createPattern(s,"no-repeat")}catch(r){return!1}return!0}(),new Map),f=(m=Math.floor(1e3/60),u={},h=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(c=function(e){var t=Math.random();return u[t]=requestAnimationFrame(function a(s){h===s||h+m-1<s?(h=s,delete u[t],e()):u[t]=requestAnimationFrame(a)}),t},d=function(e){u[e]&&cancelAnimationFrame(u[e])}):(c=function(e){return setTimeout(e,m)},d=function(e){return clearTimeout(e)}),{frame:c,cancel:d}),g=function(){var t,a,r={};return function(){if(t)return t;if(!s&&n){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(l){return"undefined"!=typeof console&&console.warn,null}!function(e){function t(t,a){e.postMessage({options:t||{},callback:a})}e.init=function(t){var a=t.transferControlToOffscreen();e.postMessage({canvas:a},[a])},e.fire=function(s,n,i){if(a)return t(s,null),a;var l=Math.random().toString(36).slice(2);return a=o(function(n){function o(t){t.data.callback===l&&(delete r[l],e.removeEventListener("message",o),a=null,p.clear(),i(),n())}e.addEventListener("message",o),t(s,l),r[l]=o.bind(null,{data:{callback:l}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),r)r[t](),delete r[t]}}(t)}return t}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(e,t,a){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:b[t],a)}function v(e){return e<0?0:Math.floor(e)}function w(e,t){return Math.floor(Math.random()*(t-e))+e}function j(e){return parseInt(e,16)}function N(e){return e.map(M)}function M(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:j(t.substring(0,2)),g:j(t.substring(2,4)),b:j(t.substring(4,6))}}function k(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function C(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function S(e){var t=e.angle*(Math.PI/180),a=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*a-Math.random()*a),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function R(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var a=t.tick++/t.totalTicks,s=t.x+t.random*t.tiltCos,r=t.y+t.random*t.tiltSin,n=t.wobbleX+t.random*t.tiltCos,l=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-a)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,a,s,r,n,i){var l=new Path2D(e),o=new Path2D;o.addPath(l,new DOMMatrix(t));var c=new Path2D;return c.addPath(o,new DOMMatrix([Math.cos(i)*r,Math.sin(i)*r,-Math.sin(i)*n,Math.cos(i)*n,a,s])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(n-s),.1*Math.abs(l-r),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var o=Math.PI/10*t.wobble,c=.1*Math.abs(n-s),d=.1*Math.abs(l-r),m=t.shape.bitmap.width*t.scalar,u=t.shape.bitmap.height*t.scalar,h=new DOMMatrix([Math.cos(o)*c,Math.sin(o)*c,-Math.sin(o)*d,Math.cos(o)*d,t.x,t.y]);h.multiplySelf(new DOMMatrix(t.shape.matrix));var x=e.createPattern(p.transform(t.shape.bitmap),"no-repeat");x.setTransform(h),e.globalAlpha=1-a,e.fillStyle=x,e.fillRect(t.x-m/2,t.y-u/2,m,u),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(n-s)*t.ovalScalar,Math.abs(l-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,a,s,r,n,i,l,o){e.save(),e.translate(t,a),e.rotate(n),e.scale(s,r),e.arc(0,0,1,i,l,o),e.restore()}(e,t.x,t.y,Math.abs(n-s)*t.ovalScalar,Math.abs(l-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var f=Math.PI/2*3,g=4*t.scalar,b=8*t.scalar,y=t.x,v=t.y,w=5,j=Math.PI/w;w--;)y=t.x+Math.cos(f)*b,v=t.y+Math.sin(f)*b,e.lineTo(y,v),f+=j,y=t.x+Math.cos(f)*g,v=t.y+Math.sin(f)*g,e.lineTo(y,v),f+=j;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(r)),e.lineTo(Math.floor(n),Math.floor(l)),e.lineTo(Math.floor(s),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function F(e,a){var i,l=!e,c=!!y(a||{},"resize"),d=!1,m=y(a,"disableForReducedMotion",Boolean),u=n&&!!y(a||{},"useWorker")?g():null,h=l?k:C,x=!(!e||!u)&&!!e.__confetti_initialized,b="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function j(t,a,n){for(var l=y(t,"particleCount",v),c=y(t,"angle",Number),d=y(t,"spread",Number),m=y(t,"startVelocity",Number),u=y(t,"decay",Number),x=y(t,"gravity",Number),g=y(t,"drift",Number),b=y(t,"colors",N),j=y(t,"ticks",Number),M=y(t,"shapes"),k=y(t,"scalar"),C=!!y(t,"flat"),F=function(e){var t=y(e,"origin",Object);return t.x=y(t,"x",Number),t.y=y(t,"y",Number),t}(t),T=l,P=[],E=e.width*F.x,I=e.height*F.y;T--;)P.push(S({x:E,y:I,angle:c,spread:d,startVelocity:m,color:b[T%b.length],shape:M[w(0,M.length)],ticks:j,decay:u,gravity:x,drift:g,scalar:k,flat:C}));return i?i.addFettis(P):(i=function(e,t,a,n,i){var l,c,d=t.slice(),m=e.getContext("2d"),u=o(function(t){function o(){l=c=null,m.clearRect(0,0,n.width,n.height),p.clear(),i(),t()}l=f.frame(function t(){!s||n.width===r.width&&n.height===r.height||(n.width=e.width=r.width,n.height=e.height=r.height),n.width||n.height||(a(e),n.width=e.width,n.height=e.height),m.clearRect(0,0,n.width,n.height),(d=d.filter(function(e){return R(m,e)})).length?l=f.frame(t):o()}),c=o});return{addFettis:function(e){return d=d.concat(e),u},canvas:e,promise:u,reset:function(){l&&f.cancel(l),c&&c()}}}(e,P,h,a,n),i.promise)}function M(a){var s=m||y(a,"disableForReducedMotion",Boolean),r=y(a,"zIndex",Number);if(s&&b)return o(function(e){e()});l&&i?e=i.canvas:l&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(r),document.body.appendChild(e)),c&&!x&&h(e);var n={width:e.width,height:e.height};function p(){if(u){var t={getBoundingClientRect:function(){if(!l)return e.getBoundingClientRect()}};return h(t),void u.postMessage({resize:{width:t.width,height:t.height}})}n.width=n.height=null}function f(){i=null,c&&(d=!1,t.removeEventListener("resize",p)),l&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,x=!1)}return u&&!x&&u.init(e),x=!0,u&&(e.__confetti_initialized=!0),c&&!d&&(d=!0,t.addEventListener("resize",p,!1)),u?u.fire(a,n,f):j(a,n,f)}return M.reset=function(){u&&u.reset(),i&&i.reset()},M}function T(){return x||(x=F(null,{useWorker:!0,resize:!0})),x}a.exports=function(){return T().apply(this,arguments)},a.exports.reset=function(){T().reset()},a.exports.create=F,a.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,a;"string"==typeof e?t=e:(t=e.path,a=e.matrix);var s=new Path2D(t),r=document.createElement("canvas").getContext("2d");if(!a){for(var n,l,o=1e3,c=o,d=o,m=0,u=0,h=0;h<o;h+=2)for(var x=0;x<o;x+=2)r.isPointInPath(s,h,x,"nonzero")&&(c=Math.min(c,h),d=Math.min(d,x),m=Math.max(m,h),u=Math.max(u,x));n=m-c,l=u-d;var p=Math.min(10/n,10/l);a=[p,0,0,p,-Math.round(n/2+c)*p,-Math.round(l/2+d)*p]}return{type:"path",path:t,matrix:a}},a.exports.shapeFromText=function(e){var t,a=1,s="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,a="scalar"in e?e.scalar:a,r="fontFamily"in e?e.fontFamily:r,s="color"in e?e.color:s);var n=10*a,i=n+"px "+r,l=new OffscreenCanvas(n,n),o=l.getContext("2d");o.font=i;var c=o.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),m=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),u=c.actualBoundingBoxLeft+2,h=c.actualBoundingBoxAscent+2;d+=4,m+=4,(o=(l=new OffscreenCanvas(d,m)).getContext("2d")).font=i,o.fillStyle=s,o.fillText(t,u,h);var x=1/a;return{type:"bitmap",bitmap:l.transferToImageBitmap(),matrix:[x,0,0,x,-d*x/2,-m*x/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),B,!1);const O=B.exports;B.exports.create;const $=()=>{const[s,r]=t.useState(!1),[n,c]=t.useState(0),[d,m]=t.useState(null),[u,h]=t.useState(!0),[x,p]=t.useState(3),f=t.useRef(null),g=[{id:1,name:"50 Points",icon:i,color:"#FFD700",probability:25},{id:2,name:"10% Off",icon:y,color:"#FF6B6B",probability:20},{id:3,name:"Free Shipping",icon:v,color:"#4ECDC4",probability:15},{id:4,name:"100 Points",icon:i,color:"#45B7D1",probability:15},{id:5,name:"20% Off",icon:y,color:"#96CEB4",probability:10},{id:6,name:"200 Points",icon:l,color:"#DDA0DD",probability:8},{id:7,name:"Mystery Gift",icon:o,color:"#FF69B4",probability:5},{id:8,name:"500 Points",icon:l,color:"#9B59B6",probability:2}],b=360/g.length;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 rounded-2xl p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[e.jsx(o,{className:"text-pink-500"})," Spin & Win"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Try your luck and win amazing rewards!"}),e.jsx("div",{className:"mt-2 inline-block bg-purple-600/30 px-4 py-1 rounded-full",children:e.jsxs("span",{className:"text-purple-300",children:["Spins left today: ",x]})})]}),e.jsxs("div",{className:"relative w-80 h-80 mx-auto",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:e.jsx("div",{className:"w-0 h-0 border-l-[15px] border-r-[15px] border-t-[30px] border-l-transparent border-r-transparent border-t-yellow-500 drop-shadow-lg"})}),e.jsxs(F.div,{ref:f,className:"w-full h-full rounded-full relative overflow-hidden shadow-2xl border-4 border-yellow-500",style:{background:"conic-gradient(from 0deg, "+g.map((e,t)=>`${e.color} ${t*b}deg ${(t+1)*b}deg`).join(", ")+")"},animate:{rotate:n},transition:{duration:5,ease:[.17,.67,.12,.99]},children:[g.map((t,a)=>{const s=a*b+b/2,r=t.icon;return e.jsx("div",{className:"absolute w-full h-full",style:{transform:`rotate(${s}deg)`},children:e.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 text-center",children:[e.jsx(r,{className:"text-white text-xl mx-auto mb-1 drop-shadow-lg"}),e.jsx("span",{className:"text-white text-xs font-bold drop-shadow-lg whitespace-nowrap",children:t.name})]})},t.id)}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-lg flex items-center justify-center border-4 border-white",children:e.jsx(l,{className:"text-white text-3xl"})})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:async()=>{if(!(s||!u||x<=0)){r(!0),m(null);try{const{data:e}=await a.post("/api/v1/gamification/spin-wheel"),t=e.prize||g[Math.floor(Math.random()*g.length)],s=g.findIndex(e=>e.name===t.name)||Math.floor(Math.random()*g.length);c(n+1800+(360-s*b)+b/2),p(e=>e-1),setTimeout(()=>{m(g[s]),r(!1),O({particleCount:100,spread:70,origin:{y:.6}}),T.success(`You won: ${g[s].name}! ðŸŽ‰`)},5e3)}catch(e){const t=Math.floor(Math.random()*g.length);c(n+1800+(360-t*b)+b/2),p(e=>e-1),setTimeout(()=>{m(g[t]),r(!1),O({particleCount:100,spread:70,origin:{y:.6}}),T.success(`You won: ${g[t].name}! ðŸŽ‰`)},5e3)}}},disabled:s||x<=0,className:"px-8 py-4 rounded-full font-bold text-lg shadow-lg "+(s||x<=0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-purple-600 text-white hover:from-pink-600 hover:to-purple-700"),children:s?"Spinning...":x<=0?"No Spins Left":"ðŸŽ° SPIN NOW!"})}),d&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center",children:e.jsx("div",{className:"inline-block bg-gradient-to-r from-yellow-500 to-orange-500 px-6 py-3 rounded-xl",children:e.jsxs("p",{className:"text-white font-bold text-xl",children:["ðŸŽ‰ You Won: ",d.name,"!"]})})}),e.jsxs("div",{className:"mt-6 text-center text-gray-400 text-sm",children:[e.jsx("p",{children:"â€¢ 3 free spins daily â€¢ More spins with purchases"}),e.jsx("p",{children:"â€¢ Prizes automatically added to your account"})]})]})},z=()=>{var s,r,n;const{user:i}=R(e=>e.auth),[l,c]=t.useState(null),[d,m]=t.useState(!0),[u,x]=t.useState(!1),p=(null==i?void 0:i.referralCode)||"NEXUS"+((null==(r=null==(s=null==i?void 0:i._id)?void 0:s.slice(-6))?void 0:r.toUpperCase())||"XXXXX"),f=`${window.location.origin}/register?ref=${p}`;t.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:e}=await a.get("/api/v1/gamification/referral-stats");c(e.data)}catch(e){c({totalReferrals:5,successfulReferrals:3,pendingReferrals:2,totalEarnings:600,referrals:[{name:"Ali K.",status:"completed",reward:200,date:"2024-01-15"},{name:"Sara M.",status:"completed",reward:200,date:"2024-01-20"},{name:"Ahmed H.",status:"pending",reward:0,date:"2024-02-01"}]})}finally{m(!1)}},b=e=>{const t=encodeURIComponent(`Join NexusMart and get Rs. 200 off your first order! Use my referral code: ${p}`),a={whatsapp:`https://wa.me/?text=${t}%20${encodeURIComponent(f)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(f)}&quote=${t}`,twitter:`https://twitter.com/intent/tweet?text=${t}&url=${encodeURIComponent(f)}`,email:`mailto:?subject=Join%20NexusMart&body=${t}%20${encodeURIComponent(f)}`};window.open(a[e],"_blank")},y=[{referrals:1,reward:"Rs. 200 Credit",unlocked:((null==l?void 0:l.successfulReferrals)||0)>=1},{referrals:3,reward:"Free Shipping for 1 Month",unlocked:((null==l?void 0:l.successfulReferrals)||0)>=3},{referrals:5,reward:"Rs. 1000 Credit",unlocked:((null==l?void 0:l.successfulReferrals)||0)>=5},{referrals:10,reward:"VIP Status + 20% Lifetime Discount",unlocked:((null==l?void 0:l.successfulReferrals)||0)>=10}];return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 rounded-2xl p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(F.div,{initial:{scale:.8},animate:{scale:1},className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:e.jsx(h,{className:"text-4xl text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Refer & Earn"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Invite friends and earn amazing rewards!"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:(null==l?void 0:l.totalReferrals)||0}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Invites"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400",children:(null==l?void 0:l.successfulReferrals)||0}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Successful"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-3xl font-bold text-purple-400",children:["Rs. ",(null==l?void 0:l.totalEarnings)||0]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Earned"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 mb-6",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Your Referral Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,readOnly:!0,className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-3 text-sm focus:outline-none"}),e.jsx(F.button,{whileTap:{scale:.95},onClick:()=>{navigator.clipboard.writeText(f),x(!0),T.success("Referral link copied!"),setTimeout(()=>x(!1),2e3)},className:"px-4 py-2 rounded-lg font-semibold transition-colors "+(u?"bg-green-600 text-white":"bg-purple-600 text-white hover:bg-purple-700"),children:u?e.jsx(w,{}):e.jsx(j,{})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Your Code:"}),e.jsx("span",{className:"bg-purple-600/30 text-purple-300 px-3 py-1 rounded-full text-sm font-mono",children:p})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Share via"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b("whatsapp"),className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(N,{className:"text-white text-xl"})}),e.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b("facebook"),className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(M,{className:"text-white text-xl"})}),e.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b("twitter"),className:"w-12 h-12 rounded-full bg-sky-500 flex items-center justify-center",children:e.jsx(k,{className:"text-white text-xl"})}),e.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b("email"),className:"w-12 h-12 rounded-full bg-gray-600 flex items-center justify-center",children:e.jsx(C,{className:"text-white text-xl"})})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"text-pink-500"})," Reward Milestones"]}),e.jsx("div",{className:"space-y-3",children:y.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+(t.unlocked?"bg-green-500/20":"bg-gray-700/50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(t.unlocked?"bg-green-500":"bg-gray-600"),children:t.unlocked?e.jsx(w,{className:"text-white text-sm"}):e.jsx("span",{className:"text-white text-sm",children:t.referrals})}),e.jsxs("span",{className:t.unlocked?"text-green-400":"text-gray-400",children:[t.referrals," Referrals"]})]}),e.jsx("span",{className:"font-semibold "+(t.unlocked?"text-green-400":"text-gray-500"),children:t.reward})]},a))})]}),(null==(n=null==l?void 0:l.referrals)?void 0:n.length)>0&&e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Recent Referrals"}),e.jsx("div",{className:"space-y-2",children:l.referrals.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:t.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:t.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:t.date})]})]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("completed"===t.status?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:"completed"===t.status?`+Rs. ${t.reward}`:"Pending"})]},a))})]})]})},A=()=>{const[a,s]=t.useState("loyalty"),n=[{id:"loyalty",label:"Loyalty Points",icon:i},{id:"achievements",label:"Achievements",icon:r},{id:"spin",label:"Spin & Win",icon:o},{id:"referral",label:"Refer & Earn",icon:h}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/30 to-gray-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 mb-4",children:e.jsx(S,{className:"text-4xl text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Rewards Center"}),e.jsx("p",{className:"text-gray-400",children:"Earn points, unlock achievements, and win amazing rewards!"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:n.map(t=>{const r=t.icon;return e.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(t.id),className:"flex items-center gap-2 px-6 py-3 rounded-full font-semibold transition-all "+(a===t.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"),children:[e.jsx(r,{}),e.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id)})}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:(()=>{switch(a){case"loyalty":default:return e.jsx(E,{});case"achievements":return e.jsx(I,{});case"spin":return e.jsx($,{});case"referral":return e.jsx(z,{})}})()},a)]})})};export{A as default};
