import{j as e}from"./three-vendor-B3gp6cmk.js";import{r as s}from"./react-vendor-takh9Jyk.js";import{B as r,a2 as t,a0 as a,i,a3 as n,a4 as d}from"./index-CCYBg9KT.js";import{u as l,d as c}from"./redux-vendor-D_jwlZfB.js";import{I as o}from"./Input-BJqj1Wnk.js";import{m as x,z as m}from"./ui-vendor-CWlZ5n2I.js";const p=({onCheckout:p,isCheckoutPage:g=!1})=>{const h=l(),{items:y,coupon:j,loading:u}=c(e=>e.cart),[f,k]=s.useState(""),[b,v]=s.useState(!1),N=y.reduce((e,s)=>e+s.price*s.quantity,0),w=.08*N,F=N>100?0:10,C=(null==j?void 0:j.discount)||0,$="percentage"===(null==j?void 0:j.type)?N*C/100:C,S=N+w+F-$,E=async()=>{if(f.trim()){v(!0);try{await h(n(f)).unwrap(),m.success("Coupon applied successfully! ðŸŽ‰"),k("")}catch(e){m.error(e.message||"Invalid coupon code")}finally{v(!1)}}else m.error("Please enter a coupon code")};return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6 space-y-6 "+(g?"":"lg:sticky lg:top-24"),children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Order Summary"}),j?e.jsx(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900 dark:text-green-100",children:j.code}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"percentage"===j.type?`${j.discount}% OFF`:`$${j.discount} OFF`})]})]}),e.jsx("button",{onClick:()=>{h(d()),m.success("Coupon removed")},className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5"})})]})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Have a coupon code?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"text",placeholder:"Enter coupon code",value:f,onChange:e=>k(e.target.value.toUpperCase()),onKeyPress:e=>"Enter"===e.key&&E()}),e.jsx(r,{variant:"outline",icon:t,onClick:E,loading:b,disabled:!f.trim(),children:"Apply"})]})]}),e.jsxs("div",{className:"space-y-3 border-t border-b border-gray-200 dark:border-gray-700 py-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Subtotal (",y.length," ",1===y.length?"item":"items",")"]}),e.jsxs("span",{className:"font-medium",children:["$",N.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Tax (8%)"}),e.jsxs("span",{className:"font-medium",children:["$",w.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Shipping"}),0===F&&e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-0.5 rounded-full",children:"FREE"})]}),e.jsx("span",{className:"font-medium",children:0===F?"FREE":`$${F.toFixed(2)}`})]}),N<100&&N>0&&e.jsxs("div",{className:"text-sm text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 p-2 rounded-lg",children:["ðŸ’¡ Add $",(100-N).toFixed(2)," more for free shipping!"]}),$>0&&e.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-$",$.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:["$",S.toFixed(2)]}),$>0&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 line-through",children:["$",(S+$).toFixed(2)]})]})]}),!g&&e.jsx(r,{variant:"primary",fullWidth:!0,size:"lg",onClick:p,disabled:0===y.length||u,loading:u,children:"Proceed to Checkout"}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-3",children:"We accept"}),e.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:["Visa","Mastercard","PayPal","Stripe"].map(s=>e.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded text-xs font-medium text-gray-600 dark:text-gray-400",children:s},s))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{children:"Secure checkout powered by Stripe"})]})]})};export{p as O};
