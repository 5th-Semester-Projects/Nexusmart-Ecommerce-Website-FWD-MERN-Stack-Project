import{j as e}from"./three-vendor-BZBb230g-1764459379380.js";import{r as a}from"./react-vendor-Jz9jFFXE-1764459379380.js";import{u as r,k as s}from"./redux-vendor-CQQVQvYY-1764459379380.js";import{au as t,aA as l,aB as d,H as i,a1 as n,s as c,j as x,aa as o,aG as g,D as m,J as p,ag as h,ac as u,ah as y,a4 as j,B as b,aH as v}from"./index-DtXZR_nt-1764459379380.js";import{z as N,m as f}from"./ui-vendor-BBk6GaFC-1764459379380.js";import{M as k}from"./Modal-BdTVj5CG-1764459379380.js";const w=[{value:"pending",label:"Pending",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",icon:n},{value:"processing",label:"Processing",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:c},{value:"shipped",label:"Shipped",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",icon:x},{value:"delivered",label:"Delivered",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:o},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",icon:g}],S=()=>{var n,c,o,g,S,C,A,D,O,P;const $=r(),{orders:F,ordersLoading:I,actionLoading:L,success:U,error:_}=s(e=>e.admin),[M,T]=a.useState(null),[z,E]=a.useState(!1),[H,W]=a.useState(!1),[q,B]=a.useState(""),[G,J]=a.useState(""),[Q,V]=a.useState(""),[K,R]=a.useState({carrier:"",trackingNumber:""});a.useEffect(()=>{$(t())},[$]),a.useEffect(()=>{U&&(N.success(U),$(l()),W(!1),T(null)),_&&(N.error(_),$(d()))},[U,_,$]);const X=e=>w.find(a=>a.value===e)||w[0],Y=F.filter(e=>{var a,r,s,t,l,d;const i=q.toLowerCase(),n=e._id.toLowerCase().includes(i)||(null==(r=null==(a=e.user)?void 0:a.firstName)?void 0:r.toLowerCase().includes(i))||(null==(t=null==(s=e.user)?void 0:s.lastName)?void 0:t.toLowerCase().includes(i))||(null==(d=null==(l=e.user)?void 0:l.email)?void 0:d.toLowerCase().includes(i)),c=!G||e.orderStatus===G;return n&&c});return e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:"Orders Management - NexusMart Admin"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Orders"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Manage customer orders (",F.length," total)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:w.map(a=>{const r=F.filter(e=>e.orderStatus===a.value).length;return e.jsx(f.div,{whileHover:{scale:1.02},onClick:()=>J(G===a.value?"":a.value),className:`p-4 rounded-xl cursor-pointer transition-all ${G===a.value?"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20":"bg-white dark:bg-gray-800"} shadow-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${a.color}`,children:e.jsx(a.icon,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.label})]})]})},a.value)})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order ID, customer name or email...",value:q,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:G,onChange:e=>J(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:I?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Loading orders..."})]})})}):0===Y.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No orders found"})}):Y.map(a=>{var r,s,t,l;const d=X(a.orderStatus);return e.jsxs(f.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono font-medium text-gray-900 dark:text-white",children:["#",a._id.slice(-8).toUpperCase()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[null==(r=a.user)?void 0:r.firstName," ",null==(s=a.user)?void 0:s.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:null==(t=a.user)?void 0:t.email})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:(i=a.createdAt,new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",null==(l=a.totalPrice)?void 0:l.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${d.color}`,children:[e.jsx(d.icon,{className:"w-3 h-3"}),d.label]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm "+("paid"===a.paymentStatus?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"),children:a.paymentStatus||"Pending"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>(e=>{T(e),E(!0)})(a),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Details",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(e=>{T(e),V(e.orderStatus),W(!0)})(a),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Update Status",children:e.jsx(x,{className:"w-4 h-4"})})]})})]},a._id);var i})})]})})})]}),e.jsx(k,{isOpen:z,onClose:()=>{E(!1),T(null)},title:"Order Details",size:"lg",children:M&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Order ID"}),e.jsxs("p",{className:"font-mono font-bold text-lg text-gray-900 dark:text-white",children:["#",M._id.slice(-8).toUpperCase()]})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${X(M.orderStatus).color}`,children:X(M.orderStatus).label})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(h,{})," Customer"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[null==(n=M.user)?void 0:n.firstName," ",null==(c=M.user)?void 0:c.lastName]}),e.jsxs("p",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(u,{className:"w-4 h-4"}),null==(o=M.user)?void 0:o.email]}),(null==(g=M.user)?void 0:g.phone)&&e.jsxs("p",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(y,{className:"w-4 h-4"}),null==(S=M.user)?void 0:S.phone]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(j,{})," Shipping Address"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:M.shippingAddress?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:M.shippingAddress.street}),e.jsxs("p",{children:[M.shippingAddress.city,", ",M.shippingAddress.state," ",M.shippingAddress.zipCode]}),e.jsx("p",{children:M.shippingAddress.country})]}):e.jsx("p",{className:"text-gray-400",children:"No address provided"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:null==(C=M.orderItems)?void 0:C.map((a,r)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("img",{src:a.image||"/placeholder-product.png",alt:a.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",a.quantity]})]}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["$",(a.price*a.quantity).toFixed(2)]})]},r))})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",(null==(A=M.itemsPrice)?void 0:A.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["$",(null==(D=M.shippingPrice)?void 0:D.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{children:["$",(null==(O=M.taxPrice)?void 0:O.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 dark:text-white pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",null==(P=M.totalPrice)?void 0:P.toFixed(2)]})]})]})}),e.jsx(b,{variant:"outline",onClick:()=>E(!1),fullWidth:!0,children:"Close"})]})}),e.jsx(k,{isOpen:H,onClose:()=>{W(!1),T(null)},title:"Update Order Status",size:"md",children:M&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Order ID"}),e.jsxs("p",{className:"font-mono font-bold text-gray-900 dark:text-white",children:["#",M._id.slice(-8).toUpperCase()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(a=>e.jsxs("button",{onClick:()=>V(a.value),className:"flex items-center gap-2 p-3 rounded-lg border-2 transition-all "+(Q===a.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[e.jsx(a.icon,{className:"w-4 h-4 "+(Q===a.value?"text-primary-600":"text-gray-400")}),e.jsx("span",{className:Q===a.value?"text-primary-600 font-medium":"text-gray-600 dark:text-gray-400",children:a.label})]},a.value))})]}),"shipped"===Q&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Tracking Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Carrier"}),e.jsx("input",{type:"text",value:K.carrier,onChange:e=>R({...K,carrier:e.target.value}),placeholder:"e.g., FedEx, UPS",className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Tracking Number"}),e.jsx("input",{type:"text",value:K.trackingNumber,onChange:e=>R({...K,trackingNumber:e.target.value}),placeholder:"Enter tracking number",className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{variant:"outline",onClick:()=>W(!1),fullWidth:!0,children:"Cancel"}),e.jsx(b,{variant:"primary",onClick:()=>{M&&Q&&$(v({orderId:M._id,status:Q,trackingInfo:"shipped"===Q?K:void 0}))},disabled:L||Q===M.orderStatus,fullWidth:!0,children:L?"Updating...":"Update Status"})]})]})})]})};export{S as default};
