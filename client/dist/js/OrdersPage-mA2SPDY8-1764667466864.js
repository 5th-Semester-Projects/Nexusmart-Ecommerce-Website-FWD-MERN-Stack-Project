import{j as e}from"./three-vendor-DbyMKvOn-1764667466864.js";import{r}from"./react-vendor-Jz9jFFXE-1764667466864.js";import{k as a,u as s}from"./redux-vendor-BGaBRFUq-1764667466864.js";import{bA as t,bF as l,bG as d,H as i,T as n,v as c,m as x,aI as o,bK as g,I as m,N as p,a6 as h,a1 as u,a2 as y,aE as j,B as b,bL as v}from"./index-CjIQkXAQ-1764667466864.js";import{z as N,m as f}from"./ui-vendor-DRm4z2cq-1764667466864.js";import{M as k}from"./Modal-Cy3VcdBA-1764667466864.js";const w=[{value:"pending",label:"Pending",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",icon:n},{value:"processing",label:"Processing",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:c},{value:"shipped",label:"Shipped",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",icon:x},{value:"delivered",label:"Delivered",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:o},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",icon:g}],S=()=>{var n,c,o,g,S,C,A,I,D,F;const L=a(),{orders:O,ordersLoading:P,actionLoading:$,success:U,error:T}=s(e=>e.admin),[_,E]=r.useState(null),[M,z]=r.useState(!1),[W,q]=r.useState(!1),[H,B]=r.useState(""),[G,K]=r.useState(""),[Q,V]=r.useState(""),[J,R]=r.useState({carrier:"",trackingNumber:""});r.useEffect(()=>{L(t())},[L]),r.useEffect(()=>{U&&(N.success(U),L(l()),q(!1),E(null)),T&&(N.error(T),L(d()))},[U,T,L]);const X=e=>w.find(r=>r.value===e)||w[0],Y=O.filter(e=>{var r,a,s,t,l,d;const i=H.toLowerCase(),n=e._id.toLowerCase().includes(i)||(null==(a=null==(r=e.user)?void 0:r.firstName)?void 0:a.toLowerCase().includes(i))||(null==(t=null==(s=e.user)?void 0:s.lastName)?void 0:t.toLowerCase().includes(i))||(null==(d=null==(l=e.user)?void 0:l.email)?void 0:d.toLowerCase().includes(i)),c=!G||e.orderStatus===G;return n&&c});return e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:"Orders Management - NexusMart Admin"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Orders"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Manage customer orders (",O.length," total)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:w.map(r=>{const a=O.filter(e=>e.orderStatus===r.value).length;return e.jsx(f.div,{whileHover:{scale:1.02},onClick:()=>K(G===r.value?"":r.value),className:`p-4 rounded-xl cursor-pointer transition-all ${G===r.value?"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20":"bg-white dark:bg-gray-800"} shadow-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.color}`,children:e.jsx(r.icon,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.label})]})]})},r.value)})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order ID, customer name or email...",value:H,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:G,onChange:e=>K(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),w.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:P?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Loading orders..."})]})})}):0===Y.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No orders found"})}):Y.map(r=>{var a,s,t,l;const d=X(r.orderStatus);return e.jsxs(f.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono font-medium text-gray-900 dark:text-white",children:["#",r._id.slice(-8).toUpperCase()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[null==(a=r.user)?void 0:a.firstName," ",null==(s=r.user)?void 0:s.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:null==(t=r.user)?void 0:t.email})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:(i=r.createdAt,new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",null==(l=r.totalPrice)?void 0:l.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${d.color}`,children:[e.jsx(d.icon,{className:"w-3 h-3"}),d.label]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm "+("paid"===r.paymentStatus?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"),children:r.paymentStatus||"Pending"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>(e=>{E(e),z(!0)})(r),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Details",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(e=>{E(e),V(e.orderStatus),q(!0)})(r),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Update Status",children:e.jsx(x,{className:"w-4 h-4"})})]})})]},r._id);var i})})]})})})]}),e.jsx(k,{isOpen:M,onClose:()=>{z(!1),E(null)},title:"Order Details",size:"lg",children:_&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Order ID"}),e.jsxs("p",{className:"font-mono font-bold text-lg text-gray-900 dark:text-white",children:["#",_._id.slice(-8).toUpperCase()]})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${X(_.orderStatus).color}`,children:X(_.orderStatus).label})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(h,{})," Customer"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[null==(n=_.user)?void 0:n.firstName," ",null==(c=_.user)?void 0:c.lastName]}),e.jsxs("p",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(u,{className:"w-4 h-4"}),null==(o=_.user)?void 0:o.email]}),(null==(g=_.user)?void 0:g.phone)&&e.jsxs("p",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(y,{className:"w-4 h-4"}),null==(S=_.user)?void 0:S.phone]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(j,{})," Shipping Address"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:_.shippingAddress?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:_.shippingAddress.street}),e.jsxs("p",{children:[_.shippingAddress.city,", ",_.shippingAddress.state," ",_.shippingAddress.zipCode]}),e.jsx("p",{children:_.shippingAddress.country})]}):e.jsx("p",{className:"text-gray-400",children:"No address provided"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:null==(C=_.orderItems)?void 0:C.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("img",{src:r.image||"/placeholder-product.png",alt:r.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",r.quantity]})]}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["$",(r.price*r.quantity).toFixed(2)]})]},a))})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",(null==(A=_.itemsPrice)?void 0:A.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["$",(null==(I=_.shippingPrice)?void 0:I.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{children:["$",(null==(D=_.taxPrice)?void 0:D.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 dark:text-white pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",null==(F=_.totalPrice)?void 0:F.toFixed(2)]})]})]})}),e.jsx(b,{variant:"outline",onClick:()=>z(!1),fullWidth:!0,children:"Close"})]})}),e.jsx(k,{isOpen:W,onClose:()=>{q(!1),E(null)},title:"Update Order Status",size:"md",children:_&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Order ID"}),e.jsxs("p",{className:"font-mono font-bold text-gray-900 dark:text-white",children:["#",_._id.slice(-8).toUpperCase()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(r=>e.jsxs("button",{onClick:()=>V(r.value),className:"flex items-center gap-2 p-3 rounded-lg border-2 transition-all "+(Q===r.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[e.jsx(r.icon,{className:"w-4 h-4 "+(Q===r.value?"text-primary-600":"text-gray-400")}),e.jsx("span",{className:Q===r.value?"text-primary-600 font-medium":"text-gray-600 dark:text-gray-400",children:r.label})]},r.value))})]}),"shipped"===Q&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Tracking Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Carrier"}),e.jsx("input",{type:"text",value:J.carrier,onChange:e=>R({...J,carrier:e.target.value}),placeholder:"e.g., FedEx, UPS",className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Tracking Number"}),e.jsx("input",{type:"text",value:J.trackingNumber,onChange:e=>R({...J,trackingNumber:e.target.value}),placeholder:"Enter tracking number",className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{variant:"outline",onClick:()=>q(!1),fullWidth:!0,children:"Cancel"}),e.jsx(b,{variant:"primary",onClick:()=>{_&&Q&&L(v({orderId:_._id,status:Q,trackingInfo:"shipped"===Q?J:void 0}))},disabled:$||Q===_.orderStatus,fullWidth:!0,children:$?"Updating...":"Update Status"})]})]})})]})};export{S as default};
