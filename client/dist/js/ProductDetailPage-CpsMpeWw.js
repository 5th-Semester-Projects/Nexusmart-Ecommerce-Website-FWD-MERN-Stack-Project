import{j as e,C as a,E as r,S as s,O as t,u as i,a as l,H as d}from"./three-vendor-B3gp6cmk.js";import{r as n,e as o,u as c,L as x}from"./react-vendor-takh9Jyk.js";import{v as m,S as g,w as h,x as p,M as y,y as u,z as b,A as j,B as v,C as f,D as N,E as k,G as w,I as S,J as C,i as R,K as z,P as A,H as P,L as F,d as O,N as I,k as M,l as E,O as L,Q as T,m as _,R as D,n as W,o as $,r as q,p as B}from"./index-CCYBg9KT.js";import{u as H,d as U}from"./redux-vendor-D_jwlZfB.js";import{m as V,z as G,A as Y}from"./ui-vendor-CWlZ5n2I.js";import{P as K}from"./ProductCard-3rI5Km4y.js";import{I as Q}from"./Input-BJqj1Wnk.js";import"./web3-vendor-OVZtbIUx.js";const J=({productId:a,category:r})=>{const[s,t]=n.useState([]),[i,l]=n.useState(!0),[d,o]=n.useState(0);n.useEffect(()=>{a&&c()},[a]);const c=async()=>{l(!0);try{const{data:e}=await m.get(`/api/products/${a}/similar`);t(e.products||[])}catch(e){if(r)try{const{data:e}=await m.get(`/api/products?category=${r}&limit=8`);t(e.products||[])}catch(s){}}finally{l(!1)}};return i?e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Similar Products"}),e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(g,{size:"lg"})})]}):s.length?e.jsxs("section",{className:"py-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"You May Also Like"}),s.length>4&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{o(e=>e-4<0?Math.max(0,s.length-4):e-4)},disabled:0===d,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(h,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{o(e=>e+4>=s.length?0:e+4)},disabled:d+4>=s.length,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(p,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx(V.div,{animate:{x:`-${25*d}%`},transition:{duration:.3,ease:"easeInOut"},className:"flex gap-6",children:s.map(a=>e.jsx("div",{className:"flex-shrink-0 w-full sm:w-1/2 lg:w-1/4",children:e.jsx(K,{product:a})},a._id))})}),s.length>4&&e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:Math.ceil(s.length/4)}).map((a,r)=>e.jsx("button",{onClick:()=>o(4*r),className:"w-2 h-2 rounded-full transition-all "+(Math.floor(d/4)===r?"bg-primary-600 w-8":"bg-gray-300 dark:bg-gray-600")},r))})]}):null},Z=({isOpen:a,onClose:r,productId:s,availableSizes:t,onSizeSelect:i})=>{const[l,d]=n.useState({height:"",weight:"",chest:"",waist:""}),[o,c]=n.useState(null),[x,g]=n.useState(!1),h=e=>{const{name:a,value:r}=e.target;d(e=>({...e,[a]:r}))};return e.jsx(y,{isOpen:a,onClose:r,title:"AI Size Recommender",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Get Your Perfect Fit"}),e.jsx("p",{children:"Provide your measurements to get an AI-powered size recommendation based on your body type."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Q,{label:"Height (cm)",name:"height",type:"number",value:l.height,onChange:h,placeholder:"170",icon:b,required:!0}),e.jsx(Q,{label:"Weight (kg)",name:"weight",type:"number",value:l.weight,onChange:h,placeholder:"65",icon:j,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Q,{label:"Chest (cm)",name:"chest",type:"number",value:l.chest,onChange:h,placeholder:"90 (optional)"}),e.jsx(Q,{label:"Waist (cm)",name:"waist",type:"number",value:l.waist,onChange:h,placeholder:"75 (optional)"})]})]}),e.jsx(v,{variant:"primary",fullWidth:!0,onClick:async()=>{if(l.height&&l.weight){g(!0);try{const{data:e}=await m.post("/api/recommendations/size",{productId:s,height:parseFloat(l.height),weight:parseFloat(l.weight),chest:l.chest?parseFloat(l.chest):void 0,waist:l.waist?parseFloat(l.waist):void 0});c(e),e.recommendedSize&&G.success(`Recommended size: ${e.recommendedSize}`)}catch(e){G.error("Failed to get size recommendation")}finally{g(!1)}}else G.error("Please provide at least height and weight")},loading:x,disabled:!l.height||!l.weight,children:"Get Size Recommendation"}),o&&e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-6 bg-gradient-to-br from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20 rounded-xl border border-primary-200 dark:border-primary-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recommended Size"}),e.jsx("p",{className:"text-3xl font-bold gradient-text",children:o.recommendedSize})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold "+(p=o.confidence,p>=.8?"text-green-600 dark:text-green-400":p>=.6?"text-yellow-600 dark:text-yellow-400":"text-orange-600 dark:text-orange-400"),children:(e=>e>=.8?"High Confidence":e>=.6?"Medium Confidence":"Low Confidence")(o.confidence)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Math.round(100*o.confidence),"% match"]})]})]}),o.reasoning&&e.jsx("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg mb-4",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:o.reasoning})}),o.alternatives&&o.alternatives.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Alternative Sizes:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.alternatives.map(a=>e.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 rounded-lg text-sm border border-gray-300 dark:border-gray-600",children:a},a))})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx(v,{variant:"primary",fullWidth:!0,onClick:()=>{(null==o?void 0:o.recommendedSize)&&(i(o.recommendedSize),r(),d({height:"",weight:"",chest:"",waist:""}),c(null))},children:"Select This Size"}),e.jsx(v,{variant:"outline",fullWidth:!0,onClick:()=>{c(null),d({height:"",weight:"",chest:"",waist:""})},children:"Try Again"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Size Chart Reference:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs text-gray-600 dark:text-gray-400",children:null==t?void 0:t.map(a=>e.jsx("div",{className:"p-2 bg-white dark:bg-gray-700 rounded text-center font-semibold",children:a},a))})]})]})});var p},X=({modelUrl:a,scale:r=1,autoRotate:s})=>{const t=n.useRef();let d=null;try{if(a&&a.endsWith(".glb")||(null==a?void 0:a.endsWith(".gltf"))){d=i(a).scene}}catch(o){}return l((e,a)=>{t.current&&s&&(t.current.rotation.y+=.5*a)}),d?e.jsx("primitive",{ref:t,object:d,scale:r}):e.jsxs("mesh",{ref:t,scale:r,children:[e.jsx("boxGeometry",{args:[1,1,1]}),e.jsx("meshStandardMaterial",{color:"#6366f1",metalness:.6,roughness:.4})]})},ee=()=>e.jsx(d,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading 3D Model..."})]})}),ae=({modelUrl:i,productName:l,className:d=""})=>{const[o,c]=n.useState(!1),[x,m]=n.useState(!0),[g,h]=n.useState(!0),p=n.useRef();return e.jsxs(V.div,{ref:p,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`relative bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-xl overflow-hidden ${d}`,style:{height:o?"100vh":"500px"},children:[e.jsx(a,{shadows:!0,dpr:[1,2],camera:{position:[0,0,5],fov:50},children:e.jsxs(n.Suspense,{fallback:e.jsx(ee,{}),children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize":[512,512]}),e.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),e.jsx(r,{preset:"city"}),e.jsx(s,{intensity:.5,environment:"city",children:e.jsx(X,{modelUrl:i,scale:1.5,autoRotate:x})}),e.jsx(t,{enableZoom:!0,enablePan:!0,enableRotate:!0,autoRotate:x,autoRotateSpeed:2,minDistance:2,maxDistance:10,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/1.5})]})}),g&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-full px-6 py-3 shadow-xl flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m(!x),className:"p-2 rounded-lg transition-colors "+(x?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),title:x?"Stop Rotation":"Auto Rotate",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Drag to rotate • Scroll to zoom"})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),e.jsx("button",{onClick:()=>{var e;document.fullscreenElement?(document.exitFullscreen(),c(!1)):(null==(e=p.current)||e.requestFullscreen(),c(!0))},className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:o?"Exit Fullscreen":"Fullscreen",children:o?e.jsx(w,{className:"w-5 h-5"}):e.jsx(S,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"absolute top-4 left-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-lg px-4 py-2 shadow-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"3D View"}),l&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-1",children:l})]}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("div",{className:"bg-green-500 w-2 h-2 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded px-2 py-1",children:"Interactive"})]})]})},re=({modelUrl:a,productName:r,isOpen:s,onClose:t})=>{const[i,l]=n.useState(!1),[d,o]=n.useState(!1),[c,x]=n.useState(null),m=n.useRef(null);n.useEffect(()=>{g()},[]);const g=async()=>{if("xr"in navigator)try{const e=await navigator.xr.isSessionSupported("immersive-ar");l(e)}catch(e){l(!1)}else l(!1)},h=()=>{c&&(c.end(),x(null))};return e.jsx(y,{isOpen:s,onClose:()=>{h(),t()},title:"AR Try-On",size:"lg",children:e.jsx("div",{className:"space-y-6",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"AR is Ready!"}),e.jsxs("p",{children:['Click "Start AR" to see ',r," in your space. Point your camera at a flat surface and tap to place the product."]})]})]})}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View in your space with AR"})]})]}),e.jsx("canvas",{ref:m,className:"hidden",width:window.innerWidth,height:window.innerHeight}),e.jsx(Y,{children:c&&e.jsxs(V.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"p-6 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute"}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),e.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:"AR Session Active"})]}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:"Point your camera at a flat surface. Tap the screen to place the product."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Reset Position"}),e.jsx("button",{className:"px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Rotate Model"})]})]})}),e.jsx("div",{className:"flex gap-3",children:c?e.jsx(v,{variant:"danger",fullWidth:!0,onClick:h,icon:R,children:"Exit AR"}):e.jsx(v,{variant:"primary",fullWidth:!0,onClick:async()=>{if(i){o(!0);try{const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test","dom-overlay"],domOverlay:{root:document.body}});x(e);const a=m.current.getContext("webgl",{xrCompatible:!0}),r=await e.requestReferenceSpace("local"),s=(t,i)=>{e.requestAnimationFrame(s);i.getViewerPose(r)&&(a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))};e.requestAnimationFrame(s),e.addEventListener("end",()=>{x(null),o(!1)}),G.success("AR session started! Point your camera at a surface.")}catch(e){G.error("Failed to start AR. Please try again."),o(!1)}}else G.error("AR is not supported on this device")},loading:d,icon:C,children:"Start AR Experience"})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"AR Tips:"}),e.jsxs("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("li",{children:"• Move your device slowly to scan the environment"}),e.jsx("li",{children:"• Ensure good lighting for better tracking"}),e.jsx("li",{children:"• Use a flat surface for best results"}),e.jsx("li",{children:"• Pinch to scale, drag to move the model"})]})]})]}):e.jsx("div",{className:"p-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"AR Not Supported"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"Your device doesn't support AR features. To use AR try-on, you need:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[e.jsx("li",{children:"A mobile device with ARCore (Android) or ARKit (iOS)"}),e.jsx("li",{children:"A compatible browser (Chrome, Safari, Firefox Reality)"}),e.jsx("li",{children:"Camera permissions enabled"})]})]})]})})})})},se=()=>{var a,r,s,t,i,l,d,m,g,u,b,j,f;const{id:N}=o(),k=H(),w=c(),{currentProduct:S,loading:R,error:K}=U(e=>e.products),{items:Q}=U(e=>e.wishlist),[X,ee]=n.useState(0),[se,te]=n.useState({}),[ie,le]=n.useState(1),[de,ne]=n.useState("description"),[oe,ce]=n.useState(!1),[xe,me]=n.useState(!1),[ge,he]=n.useState(!1),[pe,ye]=n.useState(!1);n.useEffect(()=>{N&&k(z(N))},[N,k]);const ue=S&&Q.some(e=>e._id===S._id),be=()=>{var e,a;S&&(k($({product:S._id,name:S.name,price:S.price,image:null==(a=null==(e=S.images)?void 0:e[0])?void 0:a.url,stock:S.stock,quantity:ie,variants:se})),G.success("Added to cart"))};if(R)return e.jsx(A,{text:"Loading product..."});if(K||!S)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:K||"This product does not exist"}),e.jsx(v,{variant:"primary",onClick:()=>w("/products"),children:"Browse Products"})]})})});const je=S.discount||(S.originalPrice&&S.price?Math.round((S.originalPrice-S.price)/S.originalPrice*100):0);return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsxs("title",{children:[S.name," - NexusMart"]}),e.jsx("meta",{name:"description",content:S.description})]}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(V.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[e.jsx(x,{to:"/",className:"hover:text-primary-600",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(x,{to:"/products",className:"hover:text-primary-600",children:"Products"}),e.jsx("span",{children:"/"}),(null==(a=S.category)?void 0:a.name)&&e.jsxs(e.Fragment,{children:[e.jsx(x,{to:`/products?category=${S.category._id}`,className:"hover:text-primary-600",children:S.category.name}),e.jsx("span",{children:"/"})]}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:S.name})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 mb-16",children:[e.jsxs(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-gray-800 rounded-2xl overflow-hidden group",children:[je>0&&e.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-red-500 text-white px-3 py-1.5 rounded-full text-sm font-bold",children:[je,"% OFF"]}),e.jsx("button",{onClick:()=>ce(!0),className:"absolute top-4 right-4 z-10 p-3 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full hover:bg-white dark:hover:bg-gray-800",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("img",{src:(null==(s=null==(r=S.images)?void 0:r[X])?void 0:s.url)||"/placeholder-product.jpg",alt:S.name,className:"w-full h-full object-cover cursor-zoom-in",onClick:()=>ce(!0)}),(null==(t=S.images)?void 0:t.length)>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ee(e=>0===e?S.images.length-1:e-1),className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full hover:bg-white dark:hover:bg-gray-800 opacity-0 group-hover:opacity-100",children:e.jsx(h,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>ee(e=>e===S.images.length-1?0:e+1),className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full hover:bg-white dark:hover:bg-gray-800 opacity-0 group-hover:opacity-100",children:e.jsx(p,{className:"w-5 h-5"})})]})]}),(null==(i=S.images)?void 0:i.length)>1&&e.jsx("div",{className:"grid grid-cols-5 gap-3",children:S.images.map((a,r)=>e.jsx(V.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ee(r),className:"aspect-square rounded-lg overflow-hidden border-2 "+(X===r?"border-primary-500 ring-2 ring-primary-200 dark:ring-primary-800":"border-transparent hover:border-gray-300"),children:e.jsx("img",{src:a.url,alt:`${S.name} ${r+1}`,className:"w-full h-full object-cover"})},r))})]}),e.jsxs(V.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[(null==(l=S.category)?void 0:l.name)&&e.jsx(x,{to:`/products?category=${S.category._id}`,className:"inline-block text-sm text-primary-600 dark:text-primary-400 font-medium uppercase tracking-wide hover:underline",children:S.category.name}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:S.name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,r)=>e.jsx(O,{className:"w-5 h-5 "+(r<Math.floor(S.ratings||0)?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600")},r))}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[null==(d=S.ratings)?void 0:d.toFixed(1)," (",S.numOfReviews||0," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-5xl font-bold text-primary-600 dark:text-primary-400",children:["$",null==(m=S.price)?void 0:m.toFixed(2)]}),S.originalPrice&&S.originalPrice>S.price&&e.jsxs("span",{className:"text-2xl text-gray-400 line-through",children:["$",S.originalPrice.toFixed(2)]})]}),e.jsx("div",{children:S.stock>0?e.jsxs("span",{className:"inline-flex items-center gap-2 text-green-600 font-medium",children:["✓ In Stock ",S.stock<10&&e.jsxs("span",{className:"text-orange-600",children:["(Only ",S.stock," left!)"]})]}):e.jsx("span",{className:"text-red-600 font-medium",children:"✗ Out of Stock"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:S.description}),null==(g=S.variants)?void 0:g.map(a=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white",children:[a.type,": ",e.jsx("span",{className:"text-primary-600",children:se[a.type]||"Select"})]}),"size"===a.type.toLowerCase()&&e.jsxs("button",{onClick:()=>me(!0),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),"Find My Size"]})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:a.options.map(r=>e.jsx(V.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>te(e=>({...e,[a.type]:r})),className:"px-6 py-3 rounded-lg border-2 font-medium "+(se[a.type]===r?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-600":"border-gray-300 dark:border-gray-600 hover:border-primary-300"),children:r},r))})]},a.type)),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border-2 border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("button",{onClick:()=>ie>1&&le(e=>e-1),disabled:ie<=1,className:"px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 font-bold text-xl",children:"-"}),e.jsx("span",{className:"px-8 py-3 font-bold text-xl text-gray-900 dark:text-white border-x-2 border-gray-300 dark:border-gray-600",children:ie}),e.jsx("button",{onClick:()=>S&&ie<S.stock&&le(e=>e+1),disabled:ie>=S.stock,className:"px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 font-bold text-xl",children:"+"})]}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["(",S.stock," available)"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(v,{variant:"primary",size:"lg",icon:M,onClick:be,disabled:0===S.stock,className:"flex-1",children:"Add to Cart"}),e.jsx(v,{variant:ue?"danger":"outline",size:"lg",icon:E,onClick:()=>{S&&(ue?(k(q(S._id)),G.success("Removed from wishlist")):(k(B(S)),G.success("Added to wishlist")))},children:ue?"Remove":"Wishlist"}),e.jsx(v,{variant:"outline",size:"lg",icon:L,onClick:()=>{navigator.share?navigator.share({title:null==S?void 0:S.name,text:null==S?void 0:S.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),G.success("Link copied!"))},children:"Share"})]}),e.jsx(v,{variant:"secondary",size:"lg",fullWidth:!0,onClick:()=>{be(),w("/checkout")},disabled:0===S.stock,children:"Buy Now"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx(v,{variant:"outline",size:"sm",icon:T,onClick:()=>he(!0),className:"border-purple-300 dark:border-purple-700 hover:bg-purple-100 dark:hover:bg-purple-900/30",children:"View in 3D"}),e.jsx(v,{variant:"outline",size:"sm",icon:C,onClick:()=>ye(!0),className:"border-blue-300 dark:border-blue-700 hover:bg-blue-100 dark:hover:bg-blue-900/30",children:"AR Try-On"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[e.jsx(_,{className:"w-8 h-8 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Free Shipping"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"On orders $100+"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[e.jsx(D,{className:"w-8 h-8 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Easy Returns"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"30-day policy"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[e.jsx(W,{className:"w-8 h-8 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Secure Payment"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"100% protected"})]})]})]})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card mb-16",children:[e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:["description","specifications","reviews"].map(a=>e.jsx("button",{onClick:()=>ne(a),className:"px-8 py-4 font-semibold capitalize "+(de===a?"border-b-2 border-primary-500 text-primary-600":"text-gray-600 dark:text-gray-400 hover:text-gray-900"),children:a},a))}),e.jsx("div",{className:"p-8",children:e.jsxs(Y,{mode:"wait",children:["description"===de&&e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Product Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:S.description})]},"description"),"specifications"===de&&e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Specifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Brand"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:S.brand||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Stock"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:S.stock})]})]})]},"specifications"),"reviews"===de&&e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No reviews yet. Be the first!"})]},"reviews")]})})]}),e.jsx(J,{productId:S._id,category:S.category})]})}),e.jsx(y,{isOpen:oe,onClose:()=>ce(!1),size:"full",children:e.jsx("img",{src:null==(b=null==(u=S.images)?void 0:u[X])?void 0:b.url,alt:S.name,className:"w-full h-auto max-h-[80vh] object-contain"})}),e.jsx(Z,{isOpen:xe,onClose:()=>me(!1),productId:S._id,availableSizes:(null==(f=null==(j=S.variants)?void 0:j.find(e=>"size"===e.type.toLowerCase()))?void 0:f.options)||[],onSizeSelect:e=>te(a=>({...a,Size:e}))}),e.jsx(y,{isOpen:ge,onClose:()=>he(!1),title:"3D Product View",size:"full",children:e.jsx(ae,{modelUrl:S.model3D||null,productName:S.name,className:"h-[80vh]"})}),e.jsx(re,{modelUrl:S.model3D||null,productName:S.name,isOpen:pe,onClose:()=>ye(!1)})]})};export{se as default};
