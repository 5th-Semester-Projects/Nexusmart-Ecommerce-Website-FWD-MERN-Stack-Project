import{j as e}from"./three-vendor-AoJhhNVU-1764454023538.js";import{r as a}from"./react-vendor-Jz9jFFXE-1764454023538.js";import{u as r,k as t}from"./redux-vendor-BwwL3Y8M-1764454023538.js";import{am as s,ar as l,as as i,at as n,H as d,B as c,u as o,D as x,au as m,S as g,an as u,s as p,av as h,p as y,aw as j,ax as v,ay as b}from"./index-BO02Ebat-1764454023538.js";import{z as f,m as N}from"./ui-vendor-CmI2tuea-1764454023538.js";import{M as k}from"./Modal-DThBQtmG-1764454023538.js";import{I as w}from"./Input-Ba7x7mAp-1764454023538.js";const C=({product:r,categories:t,onSubmit:s,onClose:l,isLoading:i})=>{var n;const[d,o]=a.useState({name:(null==r?void 0:r.name)||"",description:(null==r?void 0:r.description)||"",price:(null==r?void 0:r.price)||"",comparePrice:(null==r?void 0:r.comparePrice)||"",stock:(null==r?void 0:r.stock)||"",category:(null==(n=null==r?void 0:r.category)?void 0:n._id)||(null==r?void 0:r.category)||"",brand:(null==r?void 0:r.brand)||"",featured:(null==r?void 0:r.featured)||!1,newArrival:(null==r?void 0:r.newArrival)||!1,status:(null==r?void 0:r.status)||"active"}),[x,m]=a.useState([]),[g,j]=a.useState((null==r?void 0:r.images)||[]),v=e=>{const{name:a,value:r,type:t,checked:s}=e.target;o(e=>({...e,[a]:"checkbox"===t?s:r}))};return e.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=new FormData;Object.keys(d).forEach(e=>{a.append(e,d[e])}),x.forEach(e=>{a.append("images",e)});const r=g.filter(e=>!e.isNew);a.append("existingImages",JSON.stringify(r)),s(a)},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{label:"Product Name",name:"name",value:d.name,onChange:v,placeholder:"Enter product name",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Description"}),e.jsx("textarea",{name:"description",value:d.description,onChange:v,placeholder:"Enter product description",rows:4,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 resize-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Category"}),e.jsxs("select",{name:"category",value:d.category,onChange:v,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),t.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsx(w,{label:"Brand",name:"brand",value:d.brand,onChange:v,placeholder:"Enter brand name"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(w,{label:"Price",name:"price",type:"number",step:"0.01",value:d.price,onChange:v,placeholder:"0.00",icon:u,required:!0}),e.jsx(w,{label:"Compare Price",name:"comparePrice",type:"number",step:"0.01",value:d.comparePrice,onChange:v,placeholder:"0.00",icon:u})]}),e.jsx(w,{label:"Stock",name:"stock",type:"number",value:d.stock,onChange:v,placeholder:"0",icon:p,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Status"}),e.jsxs("select",{name:"status",value:d.status,onChange:v,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"featured",checked:d.featured,onChange:v,className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Featured"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"newArrival",checked:d.newArrival,onChange:v,className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"New Arrival"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Product Images"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const a=Array.from(e.target.files);m(a);const r=a.map(e=>({url:URL.createObjectURL(e),isNew:!0}));j([...g,...r])},className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(h,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Click or drag images here"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"PNG, JPG up to 5MB each"})]})]}),g.length>0&&e.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:g.map((a,r)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,alt:`Preview ${r+1}`,className:"w-20 h-20 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>(e=>{const a=g.filter((a,r)=>r!==e);if(j(a),g[e].isNew){const a=x.filter((a,r)=>r!==e-(g.length-x.length));m(a)}})(r),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(y,{className:"w-4 h-4"})})]},r))})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(c,{variant:"outline",type:"button",onClick:l,fullWidth:!0,children:"Cancel"}),e.jsx(c,{variant:"primary",type:"submit",disabled:i,fullWidth:!0,children:i?"Saving...":r?"Update Product":"Create Product"})]})]})},S=()=>{const u=r(),{products:p,productsLoading:h,categories:y,actionLoading:w,success:S,error:P}=t(e=>e.admin),[A,D]=a.useState(!1),[L,_]=a.useState(null),[E,z]=a.useState(null),[F,I]=a.useState(""),[M,q]=a.useState(""),[O,U]=a.useState("");a.useEffect(()=>{u(s()),u(l())},[u]),a.useEffect(()=>{S&&(f.success(S),u(i()),D(!1),_(null),z(null)),P&&(f.error(P),u(n()))},[S,P,u]);const W=p.filter(e=>{var a,r;const t=e.name.toLowerCase().includes(F.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(F.toLowerCase())),s=!M||(null==(r=e.category)?void 0:r._id)===M||e.category===M,l=!O||e.status===O;return t&&s&&l}),$=e=>{const a={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",inactive:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400",draft:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"};return a[e]||a.active};return e.jsxs(e.Fragment,{children:[e.jsx(d,{children:e.jsx("title",{children:"Products Management - NexusMart Admin"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Products"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Manage your product inventory (",p.length," total)"]})]}),e.jsx(c,{variant:"primary",icon:o,onClick:()=>{_(null),D(!0)},children:"Add Product"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:F,onChange:e=>I(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:M,onChange:e=>q(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Categories"}),y.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsxs("select",{value:O,onChange:e=>U(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]})]})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Loading products..."})]})})}):0===W.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No products found"})}):W.map(a=>{var r,t,s,l,i,n;return e.jsxs(N.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:(null==(t=null==(r=a.images)?void 0:r[0])?void 0:t.url)||"/placeholder-product.png",alt:a.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:[null==(s=a.description)?void 0:s.substring(0,50),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:(null==(l=a.category)?void 0:l.name)||"Uncategorized"}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",null==(i=a.price)?void 0:i.toFixed(2)]}),a.comparePrice&&e.jsxs("span",{className:"ml-2 text-sm text-gray-400 line-through",children:["$",null==(n=a.comparePrice)?void 0:n.toFixed(2)]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium "+(a.stock>10?"text-green-600":a.stock>0?"text-yellow-600":"text-red-600"),children:a.stock})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium capitalize ${$(a.status)}`,children:a.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>(e=>{_(e),D(!0)})(a),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(m,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(a),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(g,{className:"w-4 h-4"})})]})})]},a._id)})})]})})})]}),e.jsx(k,{isOpen:A,onClose:()=>{D(!1),_(null)},title:L?"Edit Product":"Create New Product",size:"xl",children:e.jsx(C,{product:L,categories:y,onSubmit:L?e=>{u(j({id:L._id,productData:e}))}:e=>{u(v(e))},onClose:()=>{D(!1),_(null)},isLoading:w})}),e.jsx(k,{isOpen:!!E,onClose:()=>z(null),title:"Delete Product",size:"sm",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"w-8 h-8 text-red-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:['Delete "',null==E?void 0:E.name,'"?']}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This action cannot be undone. The product will be permanently removed."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{variant:"outline",onClick:()=>z(null),fullWidth:!0,children:"Cancel"}),e.jsx(c,{variant:"primary",className:"!bg-red-600 hover:!bg-red-700",onClick:()=>{E&&u(b(E._id))},disabled:w,fullWidth:!0,children:w?"Deleting...":"Delete"})]})]})})]})};export{S as default};
