import{j as e}from"./three-vendor-DbyMKvOn-1764667466864.js";import{b as t,r as s}from"./react-vendor-Jz9jFFXE-1764667466864.js";import{n as i,as as n,a1 as r,Z as a,ag as o,a$ as l,d as c,aT as d,aE as h,T as u,r as m,b0 as x,s as g,b1 as f,aw as p,b2 as w,H as y,aD as v}from"./index-CjIQkXAQ-1764667466864.js";import{z as N,m as b,A as j}from"./ui-vendor-DRm4z2cq-1764667466864.js";import"./redux-vendor-BGaBRFUq-1764667466864.js";var E,C,M=Object.defineProperty,S=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,k=(e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,P=(e,t)=>{for(var s in t||(t={}))A.call(t,s)&&k(e,s,t[s]);if(S)for(var s of S(t))R.call(t,s)&&k(e,s,t[s]);return e},D=(e,t)=>{var s={};for(var i in e)A.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&S)for(var i of S(e))t.indexOf(i)<0&&R.call(e,i)&&(s[i]=e[i]);return s};(e=>{const t=class t{constructor(e,s,i,r){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let t=0;t<this.size;t++)a.push(!1);for(let t=0;t<this.size;t++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(i);if(this.drawCodewords(o),-1==r){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const s=this.getPenaltyScore();s<e&&(r=t,e=s),this.applyMask(t)}}n(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(s,i){const n=e.QrSegment.makeSegments(s);return t.encodeSegments(n,i)}static encodeBinary(s,i){const n=e.QrSegment.makeBytes(s);return t.encodeSegments([n],i)}static encodeSegments(e,i,r=1,o=40,l=-1,c=!0){if(!(t.MIN_VERSION<=r&&r<=o&&o<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let d,h;for(d=r;;d++){const s=8*t.getNumDataCodewords(d,i),n=a.getTotalBits(e,d);if(n<=s){h=n;break}if(d>=o)throw new RangeError("Data too long")}for(const s of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&h<=8*t.getNumDataCodewords(d,s)&&(i=s);let u=[];for(const t of e){s(t.mode.modeBits,4,u),s(t.numChars,t.mode.numCharCountBits(d),u);for(const e of t.getData())u.push(e)}n(u.length==h);const m=8*t.getNumDataCodewords(d,i);n(u.length<=m),s(0,Math.min(4,m-u.length),u),s(0,(8-u.length%8)%8,u),n(u.length%8==0);for(let t=236;u.length<m;t^=253)s(t,8,u);let x=[];for(;8*x.length<u.length;)x.push(0);return u.forEach((e,t)=>x[t>>>3]|=e<<7-(7&t)),new t(d,i,x,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let i=0;i<t;i++)0==s&&0==i||0==s&&i==t-1||s==t-1&&0==i||this.drawAlignmentPattern(e[s],e[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let s=t;for(let i=0;i<10;i++)s=s<<1^1335*(s>>>9);const r=21522^(t<<10|s);n(r>>>15==0);for(let n=0;n<=5;n++)this.setFunctionModule(8,n,i(r,n));this.setFunctionModule(8,7,i(r,6)),this.setFunctionModule(8,8,i(r,7)),this.setFunctionModule(7,8,i(r,8));for(let n=9;n<15;n++)this.setFunctionModule(14-n,8,i(r,n));for(let n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,i(r,n));for(let n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,i(r,n));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let s=0;s<12;s++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;n(t>>>18==0);for(let s=0;s<18;s++){const e=i(t,s),n=this.size-11+s%3,r=Math.floor(s/3);this.setFunctionModule(n,r,e),this.setFunctionModule(r,n,e)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let i=-4;i<=4;i++){const n=Math.max(Math.abs(i),Math.abs(s)),r=e+i,a=t+s;0<=r&&r<this.size&&0<=a&&a<this.size&&this.setFunctionModule(r,a,2!=n&&4!=n)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let i=-2;i<=2;i++)this.setFunctionModule(e+i,t+s,1!=Math.max(Math.abs(i),Math.abs(s)))}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){const s=this.version,i=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(s,i))throw new RangeError("Invalid argument");const r=t.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][s],a=t.ECC_CODEWORDS_PER_BLOCK[i.ordinal][s],o=Math.floor(t.getNumRawDataModules(s)/8),l=r-o%r,c=Math.floor(o/r);let d=[];const h=t.reedSolomonComputeDivisor(a);for(let n=0,m=0;n<r;n++){let s=e.slice(m,m+c-a+(n<l?0:1));m+=s.length;const i=t.reedSolomonComputeRemainder(s,h);n<l&&s.push(0),d.push(s.concat(i))}let u=[];for(let t=0;t<d[0].length;t++)d.forEach((e,s)=>{(t!=c-a||s>=l)&&u.push(e[t])});return n(u.length==o),u}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let n=0;n<this.size;n++)for(let r=0;r<2;r++){const a=t-r,o=!(t+1&2)?this.size-1-n:n;!this.isFunction[o][a]&&s<8*e.length&&(this.modules[o][a]=i(e[s>>>3],7-(7&s)),s++)}}n(s==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let i;switch(e){case 0:i=(s+t)%2==0;break;case 1:i=t%2==0;break;case 2:i=s%3==0;break;case 3:i=(s+t)%3==0;break;case 4:i=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:i=s*t%2+s*t%3==0;break;case 6:i=(s*t%2+s*t%3)%2==0;break;case 7:i=((s+t)%2+s*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][s]&&i&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let s=!1,i=0,r=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[n][a]==s?(i++,5==i?e+=t.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,r),s||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),s=this.modules[n][a],i=1);e+=this.finderPenaltyTerminateAndCount(s,i,r)*t.PENALTY_N3}for(let n=0;n<this.size;n++){let s=!1,i=0,r=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][n]==s?(i++,5==i?e+=t.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,r),s||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),s=this.modules[a][n],i=1);e+=this.finderPenaltyTerminateAndCount(s,i,r)*t.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let s=0;s<this.size-1;s++){const i=this.modules[n][s];i==this.modules[n][s+1]&&i==this.modules[n+1][s]&&i==this.modules[n+1][s+1]&&(e+=t.PENALTY_N2)}let s=0;for(const t of this.modules)s=t.reduce((e,t)=>e+(t?1:0),s);const i=this.size*this.size,r=Math.ceil(Math.abs(20*s-10*i)/i)-1;return n(0<=r&&r<=9),e+=r*t.PENALTY_N4,n(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let s=[6];for(let i=this.size-7;s.length<e;i-=t)s.splice(1,0,i);return s}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return n(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let s=[];for(let t=0;t<e-1;t++)s.push(0);s.push(1);let i=1;for(let n=0;n<e;n++){for(let e=0;e<s.length;e++)s[e]=t.reedSolomonMultiply(s[e],i),e+1<s.length&&(s[e]^=s[e+1]);i=t.reedSolomonMultiply(i,2)}return s}static reedSolomonComputeRemainder(e,s){let i=s.map(e=>0);for(const n of e){const e=n^i.shift();i.push(0),s.forEach((s,n)=>i[n]^=t.reedSolomonMultiply(s,e))}return i}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let s=0;for(let i=7;i>=0;i--)s=s<<1^285*(s>>>7),s^=(t>>>i&1)*e;return n(s>>>8==0),s}finderPenaltyCountPatterns(e){const t=e[1];n(t<=3*this.size);const s=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(s&&e[0]>=4*t&&e[6]>=t?1:0)+(s&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function s(e,t,s){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let i=t-1;i>=0;i--)s.push(e>>>i&1)}function i(e,t){return!!(e>>>t&1)}function n(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;const r=class e{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let i=[];for(const e of t)s(e,8,i);return new e(e.Mode.BYTE,t.length,i)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let i=[];for(let e=0;e<t.length;){const n=Math.min(t.length-e,3);s(parseInt(t.substring(e,e+n),10),3*n+1,i),e+=n}return new e(e.Mode.NUMERIC,t.length,i)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i,n=[];for(i=0;i+2<=t.length;i+=2){let r=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i));r+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i+1)),s(r,11,n)}return i<t.length&&s(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i)),6,n),new e(e.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let i=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)s(t,8,i);else if(t<16384)s(2,2,i),s(t,14,i);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");s(6,3,i),s(t,21,i)}return new e(e.Mode.ECI,0,i)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(const i of e){const e=i.mode.numCharCountBits(t);if(i.numChars>=1<<e)return 1/0;s+=4+e+i.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substring(s+1,s+3),16)),s+=2);return t}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=r;e.QrSegment=r})(E||(E={})),(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((C=E||(E={})).QrCode||(C.QrCode={})),(e=>{(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(E||(E={}));var I=E,L={L:I.QrCode.Ecc.LOW,M:I.QrCode.Ecc.MEDIUM,Q:I.QrCode.Ecc.QUARTILE,H:I.QrCode.Ecc.HIGH},O=128,z="L",F="#FFFFFF",T="#000000",_=!1,B=1;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */function U(e,t=0){const s=[];return e.forEach(function(e,i){let n=null;e.forEach(function(r,a){if(!r&&null!==n)return s.push(`M${n+t} ${i+t}h${a-n}v1H${n+t}z`),void(n=null);if(a!==e.length-1)r&&null===n&&(n=a);else{if(!r)return;null===n?s.push(`M${a+t},${i+t} h1v1H${a+t}z`):s.push(`M${n+t},${i+t} h${a+1-n}v1H${n+t}z`)}})}),s.join("")}function H(e,t){return e.slice().map((e,s)=>s<t.y||s>=t.y+t.h?e:e.map((e,s)=>(s<t.x||s>=t.x+t.w)&&e))}function $({value:e,level:s,minVersion:i,includeMargin:n,marginSize:r,imageSettings:a,size:o,boostLevel:l}){let c=t.useMemo(()=>{const t=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...I.QrSegment.makeSegments(t)),e),[]);return I.QrCode.encodeSegments(t,L[s],i,void 0,void 0,l)},[e,s,i,l]);const{cells:d,margin:h,numCells:u,calculatedImageSettings:m}=t.useMemo(()=>{let e=c.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(n,r),s=e.length+2*t,i=function(e,t,s,i){if(null==i)return null;const n=e.length+2*s,r=Math.floor(.1*t),a=n/t,o=(i.width||r)*a,l=(i.height||r)*a,c=null==i.x?e.length/2-o/2:i.x*a,d=null==i.y?e.length/2-l/2:i.y*a,h=null==i.opacity?1:i.opacity;let u=null;if(i.excavate){let e=Math.floor(c),t=Math.floor(d);u={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+d-t)}}return{x:c,y:d,h:l,w:o,excavation:u,opacity:h,crossOrigin:i.crossOrigin}}(e,o,t,a);return{cells:e,margin:t,numCells:s,calculatedImageSettings:i}},[c,o,a,n,r]);return{qrcode:c,margin:h,cells:d,numCells:u,calculatedImageSettings:m}}var V=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();t.forwardRef(function(e,s){const i=e,{value:n,size:r=O,level:a=z,bgColor:o=F,fgColor:l=T,includeMargin:c=_,minVersion:d=B,boostLevel:h,marginSize:u,imageSettings:m}=i,x=D(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=x,f=D(x,["style"]),p=null==m?void 0:m.src,w=t.useRef(null),y=t.useRef(null),v=t.useCallback(e=>{w.current=e,"function"==typeof s?s(e):s&&(s.current=e)},[s]),[N,b]=t.useState(!1),{margin:j,cells:E,numCells:C,calculatedImageSettings:M}=$({value:n,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:u,imageSettings:m,size:r});t.useEffect(()=>{if(null!=w.current){const e=w.current,t=e.getContext("2d");if(!t)return;let s=E;const i=y.current,n=null!=M&&null!==i&&i.complete&&0!==i.naturalHeight&&0!==i.naturalWidth;n&&null!=M.excavation&&(s=H(E,M.excavation));const a=window.devicePixelRatio||1;e.height=e.width=r*a;const c=r/C*a;t.scale(c,c),t.fillStyle=o,t.fillRect(0,0,C,C),t.fillStyle=l,V?t.fill(new Path2D(U(s,j))):E.forEach(function(e,s){e.forEach(function(e,i){e&&t.fillRect(i+j,s+j,1,1)})}),M&&(t.globalAlpha=M.opacity),n&&t.drawImage(i,M.x+j,M.y+j,M.w,M.h)}}),t.useEffect(()=>{b(!1)},[p]);const S=P({height:r,width:r},g);let A=null;return null!=p&&(A=t.createElement("img",{src:p,key:p,style:{display:"none"},onLoad:()=>{b(!0)},ref:y,crossOrigin:null==M?void 0:M.crossOrigin})),t.createElement(t.Fragment,null,t.createElement("canvas",P({style:S,height:r,width:r,ref:v,role:"img"},f)),A)}).displayName="QRCodeCanvas";var Q=t.forwardRef(function(e,s){const i=e,{value:n,size:r=O,level:a=z,bgColor:o=F,fgColor:l=T,includeMargin:c=_,minVersion:d=B,boostLevel:h,title:u,marginSize:m,imageSettings:x}=i,g=D(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:p,numCells:w,calculatedImageSettings:y}=$({value:n,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:m,imageSettings:x,size:r});let v=p,N=null;null!=x&&null!=y&&(null!=y.excavation&&(v=H(p,y.excavation)),N=t.createElement("image",{href:x.src,height:y.h,width:y.w,x:y.x+f,y:y.y+f,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));const b=U(v,f);return t.createElement("svg",P({height:r,width:r,viewBox:`0 0 ${w} ${w}`,ref:s,role:"img"},g),!!u&&t.createElement("title",null,u),t.createElement("path",{fill:o,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),t.createElement("path",{fill:l,d:b,shapeRendering:"crispEdges"}),N)});Q.displayName="QRCodeSVG";const Y=({length:t=6,value:i,onChange:n})=>{const r=s.useRef([]),a=e=>{var s;e.preventDefault();const i=e.clipboardData.getData("text").slice(0,t);/^\d+$/.test(i)&&(n(i.padEnd(t,"")),null==(s=r.current[Math.min(i.length,t-1)])||s.focus())};return e.jsx("div",{className:"flex gap-3 justify-center",children:Array.from({length:t}).map((s,o)=>e.jsx("input",{ref:e=>r.current[o]=e,type:"text",maxLength:1,value:i[o]||"",onChange:e=>((e,s)=>{var a;if(!/^\d*$/.test(s))return;const o=i.split("");o[e]=s,n(o.join("")),s&&e<t-1&&(null==(a=r.current[e+1])||a.focus())})(o,e.target.value),onKeyDown:e=>((e,t)=>{var s;"Backspace"===t.key&&!i[e]&&e>0&&(null==(s=r.current[e-1])||s.focus())})(o,e),onPaste:a,className:"w-12 h-14 text-center text-2xl font-bold bg-white/5 border border-white/10 rounded-xl text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all"},o))})},K=({step:t,currentStep:s,title:i,description:n,children:r})=>{const o=t===s,l=t<s;return e.jsxs("div",{className:"relative pl-10 pb-8 "+(3===t?"":"border-l-2 border-white/10 ml-4"),children:[e.jsx("div",{className:"absolute -left-4 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold "+(l?"bg-green-600 text-white":o?"bg-gradient-to-r from-purple-600 to-cyan-600 text-white":"bg-white/10 text-gray-400"),children:l?e.jsx(a,{}):t}),e.jsxs("div",{className:""+(o?"opacity-100":"opacity-50"),children:[e.jsx("h3",{className:"font-bold text-white text-lg mb-1",children:i}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:n}),o&&r]})]})},G=({onComplete:t})=>{const[d,h]=s.useState(1),[u,m]=s.useState("app"),[x,g]=s.useState(""),[f,p]=s.useState(""),[w,y]=s.useState(""),[v,b]=s.useState([]),[j,E]=s.useState(!1),[C,M]=s.useState(!1);return e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-r from-purple-600 to-cyan-600 flex items-center justify-center",children:e.jsx(i,{className:"text-3xl text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Setup Two-Factor Authentication"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Add an extra layer of security to your account"})]}),e.jsxs(K,{step:1,currentStep:d,title:"Choose Verification Method",description:"Select how you want to receive verification codes",children:[e.jsx("div",{className:"space-y-3 mb-4",children:[{id:"app",icon:n,label:"Authenticator App",desc:"Use Google Authenticator, Authy, or similar"},{id:"sms",icon:n,label:"SMS",desc:"Receive codes via text message"},{id:"email",icon:r,label:"Email",desc:"Receive codes via email"}].map(t=>e.jsxs("button",{onClick:()=>m(t.id),className:"w-full flex items-center gap-4 p-4 rounded-xl border transition-all "+(u===t.id?"bg-gradient-to-r from-purple-600/20 to-cyan-600/20 border-cyan-500":"bg-white/5 border-white/10 hover:border-white/20"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+(u===t.id?"bg-cyan-600":"bg-white/10"),children:e.jsx(t.icon,{className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-white",children:t.label}),e.jsx("p",{className:"text-sm text-gray-400",children:t.desc})]}),u===t.id&&e.jsx(a,{className:"ml-auto text-cyan-400"})]},t.id))}),e.jsx("button",{onClick:async()=>{E(!0);try{const{data:e}=await c.post("/auth/2fa/setup",{method:u});g(e.secret),p(e.qrUrl),h(2)}catch(e){N.error("Failed to initialize 2FA setup")}finally{E(!1)}},disabled:j,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-cyan-600 text-white rounded-xl font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:j?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Continue"})]}),e.jsxs(K,{step:2,currentStep:d,title:"app"===u?"Scan QR Code":"Enter Verification Code",description:"app"===u?"Scan this QR code with your authenticator app":"Enter the code sent to your device",children:["app"===u&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-2xl w-fit mx-auto mb-4",children:e.jsx(Q,{value:f||"otpauth://totp/NexusMart:demo@example.com?secret=DEMO&issuer=NexusMart",size:180})}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Can't scan? Enter this code manually:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 px-3 py-2 bg-black/30 rounded-lg font-mono text-cyan-400 text-sm",children:x||"DEMO-SECRET-KEY"}),e.jsx("button",{onClick:async()=>{await navigator.clipboard.writeText(x),M(!0),N.success("Secret key copied!"),setTimeout(()=>M(!1),2e3)},className:"p-2 rounded-lg transition-colors "+(C?"bg-green-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:C?e.jsx(a,{}):e.jsx(o,{})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Enter 6-digit verification code"}),e.jsx(Y,{length:6,value:w,onChange:y})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(1),className:"px-6 py-3 bg-white/10 text-white rounded-xl font-medium",children:"Back"}),e.jsx("button",{onClick:async()=>{if(6===w.length){E(!0);try{const{data:e}=await c.post("/auth/2fa/verify",{code:w,method:u});b(e.backupCodes),h(3)}catch(e){N.error("Invalid verification code")}finally{E(!1)}}else N.error("Please enter a valid 6-digit code")},disabled:j||6!==w.length,className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-cyan-600 text-white rounded-xl font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:j?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Verify"})]})]}),e.jsxs(K,{step:3,currentStep:d,title:"Save Backup Codes",description:"Store these codes safely. You can use them if you lose access to your device.",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border border-yellow-500/30 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l,{className:"text-yellow-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-400",children:"Important!"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Each backup code can only be used once. Keep them in a secure place."})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:(v.length>0?v:["ABCD-1234","EFGH-5678","IJKL-9012","MNOP-3456","QRST-7890","UVWX-1234","YZAB-5678","CDEF-9012"]).map((t,s)=>e.jsx("div",{className:"px-4 py-2 bg-white/5 rounded-lg font-mono text-white text-center",children:t},s))}),e.jsxs("button",{onClick:()=>{N.success("Two-factor authentication enabled!"),null==t||t()},className:"w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(a,{}),"I've Saved My Backup Codes"]})]})]})},X=e=>{const t=new Date(e),s=new Date-t,i=Math.floor(s/6e4),n=Math.floor(s/36e5),r=Math.floor(s/864e5);return i<1?"Just now":i<60?`${i} min ago`:n<24?`${n} hours ago`:r<7?`${r} days ago`:t.toLocaleDateString("en-PK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},W=({session:t,isCurrentSession:i,onRevoke:r})=>{const[a,o]=s.useState(!1),c=(d=t.deviceType,{desktop:p,mobile:n,tablet:f}[d]||w);var d;const g=(y=t.userAgent).includes("Chrome")?{name:"Chrome",color:"text-yellow-400"}:y.includes("Firefox")?{name:"Firefox",color:"text-orange-400"}:y.includes("Safari")?{name:"Safari",color:"text-blue-400"}:y.includes("Edge")?{name:"Edge",color:"text-cyan-400"}:{name:"Unknown",color:"text-gray-400"};var y;return e.jsxs(b.div,{layout:!0,className:"rounded-2xl border overflow-hidden "+(i?"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-green-500/30":t.suspicious?"bg-gradient-to-r from-red-900/30 to-orange-900/30 border-red-500/30":"bg-white/5 border-white/10"),children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+(i?"bg-green-500/20":t.suspicious?"bg-red-500/20":"bg-white/10"),children:e.jsx(c,{className:"text-xl "+(i?"text-green-400":t.suspicious?"text-red-400":"text-gray-400")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${g.color}`,children:g.name}),e.jsx("span",{className:"text-gray-400",children:"on"}),e.jsx("span",{className:"text-white font-medium",children:t.os||"Unknown OS"}),i&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded-full",children:"Current Session"}),t.suspicious&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded-full flex items-center gap-1",children:[e.jsx(l,{className:"text-xs"}),"Suspicious"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"text-xs"}),t.location||"Unknown Location"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"text-xs"}),X(t.lastActive)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(!a),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(m,{className:"transition-transform "+(a?"rotate-180":"")})}),!i&&e.jsx("button",{onClick:()=>null==r?void 0:r(t.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"End this session",children:e.jsx(x,{})})]})]})}),e.jsx(j,{children:a&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-white/10 overflow-hidden",children:e.jsxs("div",{className:"p-4 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"IP Address"}),e.jsx("span",{className:"text-white font-mono",children:t.ip||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Login Time"}),e.jsx("span",{className:"text-white",children:X(t.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Last Active"}),e.jsx("span",{className:"text-white",children:X(t.lastActive)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Device"}),e.jsx("span",{className:"text-white",children:t.device||"Unknown Device"})]}),t.loginMethod&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Login Method"}),e.jsx("span",{className:"text-white capitalize",children:t.loginMethod})]})]})})})]})},J=({entry:t})=>{const s="success"===t.status;return e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl "+(s?"bg-white/5":"bg-red-900/20 border border-red-500/30"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+(s?"bg-green-500/20":"bg-red-500/20"),children:s?e.jsx(a,{className:"text-green-400"}):e.jsx(g,{className:"text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:s?"Successful Login":"Failed Login Attempt"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"text-xs"}),t.location||"Unknown"]}),e.jsx("span",{children:t.ip})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-400",children:X(t.timestamp)}),t.method&&e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t.method})]})]})},Z=()=>{const[t,n]=s.useState("sessions"),[r,a]=s.useState([]),[o,h]=s.useState([]),[u,m]=s.useState(!0),[x,g]=s.useState(null);s.useEffect(()=>{f()},[]);const f=async()=>{try{m(!0),a([{id:"1",deviceType:"desktop",os:"Windows 11",userAgent:"Chrome/120.0",location:"Lahore, Pakistan",ip:"39.45.xxx.xxx",createdAt:new Date,lastActive:new Date,device:"Dell XPS 15",loginMethod:"password"},{id:"2",deviceType:"mobile",os:"iOS 17",userAgent:"Safari/605.1",location:"Karachi, Pakistan",ip:"182.188.xxx.xxx",createdAt:new Date(Date.now()-1728e5),lastActive:new Date(Date.now()-216e5),device:"iPhone 15 Pro",loginMethod:"google"},{id:"3",deviceType:"desktop",os:"macOS Sonoma",userAgent:"Firefox/121.0",location:"New York, USA",ip:"192.168.xxx.xxx",createdAt:new Date(Date.now()-432e6),lastActive:new Date(Date.now()-432e6),device:"MacBook Pro",loginMethod:"password",suspicious:!0}]),g("1"),h([{id:"1",status:"success",location:"Lahore, Pakistan",ip:"39.45.xxx.xxx",timestamp:new Date,method:"password"},{id:"2",status:"success",location:"Karachi, Pakistan",ip:"182.188.xxx.xxx",timestamp:new Date(Date.now()-1728e5),method:"google"},{id:"3",status:"failed",location:"Unknown",ip:"103.xxx.xxx.xxx",timestamp:new Date(Date.now()-2592e5),method:"password"},{id:"4",status:"failed",location:"Unknown",ip:"103.xxx.xxx.xxx",timestamp:new Date(Date.now()-2592e5),method:"password"},{id:"5",status:"success",location:"New York, USA",ip:"192.168.xxx.xxx",timestamp:new Date(Date.now()-432e6),method:"password"}])}finally{m(!1)}},p=async e=>{try{await c.delete(`/auth/sessions/${e}`),a(t=>t.filter(t=>t.id!==e)),N.success("Session ended successfully")}catch(t){N.error("Failed to end session")}},w=r.filter(e=>e.suspicious).length,y=o.filter(e=>"failed"===e.status).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(i,{className:"text-cyan-400"}),"Security & Login History"]}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[r.length," active sessions â€¢ ",y," failed attempts"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,className:"p-3 bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white rounded-xl transition-colors",children:e.jsx(d,{})}),e.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to end all other sessions?"))try{await c.delete("/auth/sessions/all"),a(e=>e.filter(e=>e.id===x)),N.success("All other sessions ended")}catch(e){N.error("Failed to end sessions")}},className:"px-4 py-2 bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded-xl font-medium transition-colors",children:"End All Other Sessions"})]})]}),w>0&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-red-900/30 to-orange-900/30 border border-red-500/30 rounded-2xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/20 flex items-center justify-center",children:e.jsx(l,{className:"text-2xl text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-400",children:"Suspicious Activity Detected"}),e.jsxs("p",{className:"text-sm text-gray-300",children:[w," suspicious session(s) found. Review and revoke if you don't recognize them."]})]})]}),e.jsx("div",{className:"flex gap-2 bg-white/5 rounded-xl p-1 w-fit",children:[{key:"sessions",label:"Active Sessions",count:r.length},{key:"history",label:"Login History",count:o.length}].map(s=>e.jsxs("button",{onClick:()=>n(s.key),className:"px-6 py-2 rounded-lg font-medium transition-colors "+(t===s.key?"bg-gradient-to-r from-purple-600 to-cyan-600 text-white":"text-gray-400 hover:text-white"),children:[s.label," (",s.count,")"]},s.key))}),u?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:"h-24 bg-white/5 rounded-2xl animate-pulse"},t))}):"sessions"===t?e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsx(W,{session:t,isCurrentSession:t.id===x,onRevoke:p},t.id))}):e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsx(J,{entry:t},t.id))})]})},q=()=>{const[t,r]=s.useState("2fa"),a=[{id:"2fa",label:"Two-Factor Auth",icon:n},{id:"sessions",label:"Active Sessions",icon:p},{id:"history",label:"Login History",icon:v}];return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx("title",{children:"Security Settings - NexusMart"}),e.jsx("meta",{name:"description",content:"Manage your account security settings"})]}),e.jsxs("div",{className:"min-h-screen relative py-12",children:[e.jsx("div",{className:"fixed inset-0 overflow-hidden -z-10 bg-gradient-to-br from-purple-950 via-gray-950 to-purple-950/50"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 \r\n                          bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl mb-6",children:e.jsx(i,{className:"text-4xl text-white"})}),e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-4",style:{fontFamily:"Orbitron, sans-serif"},children:"Security Settings"}),e.jsx("p",{className:"text-purple-300/70 text-lg",children:"Protect your account with advanced security features"})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card rounded-2xl p-4 sticky top-24",children:[e.jsx("nav",{className:"space-y-2",children:a.map(s=>e.jsxs("button",{onClick:()=>r(s.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all "+(t===s.id?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 text-cyan-400 border border-cyan-500/30":"text-purple-300 hover:bg-purple-500/10"),children:[e.jsx(s.icon,{className:"text-xl"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id))}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(l,{className:"text-yellow-400 text-xl flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-yellow-400 font-semibold text-sm mb-1",children:"Security Tip"}),e.jsx("p",{className:"text-yellow-300/70 text-xs",children:"Enable 2FA to add an extra layer of protection to your account."})]})]})})]})}),e.jsxs(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-3",children:["2fa"===t&&e.jsx(G,{}),"sessions"===t&&e.jsx(Z,{showOnlyActive:!0}),"history"===t&&e.jsx(Z,{})]})]})]})]})]})};export{q as default};
