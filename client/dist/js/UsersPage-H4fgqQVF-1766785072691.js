import{j as e}from"./three-vendor-q47B8kY1-1766785072691.js";import{r as s}from"./react-vendor-Jz9jFFXE-1766785072691.js";import{k as a,u as r}from"./redux-vendor-M2AfqdKk-1766785072691.js";import{bO as l,bH as t,bI as d,H as i,bP as n,bQ as c,n as o,ap as x,I as m,a1 as g,aG as h,U as p,B as u,bR as b,bS as y,bT as j}from"./index-BKQ_WQ_I-1766785072691.js";import{z as N,m as v}from"./ui-vendor-h53B6cZa-1766785072691.js";import{M as k}from"./Modal-BRmcBW3d-1766785072691.js";const f=[{value:"user",label:"User",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},{value:"seller",label:"Seller",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},{value:"admin",label:"Admin",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400"}],w=()=>{var w;const C=a(),{users:B,usersLoading:U,actionLoading:S,success:A,error:L}=r(e=>e.admin),{user:R}=r(e=>e.auth),[D,z]=s.useState(""),[W,_]=s.useState(""),[M,I]=s.useState(""),[O,T]=s.useState(null),[E,H]=s.useState(!1),[P,F]=s.useState(!1),[G,J]=s.useState(!1),[Q,Y]=s.useState(""),[$,q]=s.useState("");s.useEffect(()=>{C(l())},[C]),s.useEffect(()=>{A&&(N.success(A),C(t()),H(!1),F(!1),J(!1),T(null)),L&&(N.error(L),C(d()))},[A,L,C]);const K=B.filter(e=>{var s,a,r;const l=D.toLowerCase(),t=(null==(s=e.firstName)?void 0:s.toLowerCase().includes(l))||(null==(a=e.lastName)?void 0:a.toLowerCase().includes(l))||(null==(r=e.email)?void 0:r.toLowerCase().includes(l)),d=!W||e.role===W,i=!M||"active"===M&&!e.isBlocked||"blocked"===M&&e.isBlocked;return t&&d&&i});return e.jsxs(e.Fragment,{children:[e.jsx(i,{children:e.jsx("title",{children:"Users Management - NexusMart Admin"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Users"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Manage user accounts and permissions (",B.length," total)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(n,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.filter(e=>!e.isBlocked).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Active Users"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30",children:e.jsx(c,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.filter(e=>e.isBlocked).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Blocked"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(o,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.filter(e=>"admin"===e.role).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Admins"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(x,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.filter(e=>"seller"===e.role).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sellers"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:D,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:W,onChange:e=>_(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("option",{value:"",children:"All Roles"}),f.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsxs("select",{value:M,onChange:e=>I(e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"blocked",children:"Blocked"})]})]})}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:U?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Loading users..."})]})})}):0===K.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:"No users found"})}):K.map(s=>{var a,r,l;const t=(d=s.role,f.find(e=>e.value===d)||f[0]);var d;const i=s._id===(null==R?void 0:R._id);return e.jsxs(v.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors "+(i?"bg-primary-50/50 dark:bg-primary-900/10":""),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-purple-500 flex items-center justify-center text-white font-bold",children:(null==(a=s.firstName)?void 0:a[0])||(null==(l=null==(r=s.email)?void 0:r[0])?void 0:l.toUpperCase())}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[s.firstName," ",s.lastName,i&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary-100 text-primary-600 dark:bg-primary-900/30 dark:text-primary-400 rounded",children:"You"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),s.email]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${t.color}`,children:["admin"===s.role&&e.jsx(o,{className:"w-3 h-3"}),t.label]})}),e.jsx("td",{className:"px-6 py-4",children:s.isBlocked?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:[e.jsx(c,{className:"w-3 h-3"}),"Blocked"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(n,{className:"w-3 h-3"}),"Active"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-1 text-sm",children:[e.jsx(h,{className:"w-3 h-3"}),(x=s.createdAt,new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>(e=>{T(e),Y(e.role),H(!0)})(s),disabled:i,className:"p-2 rounded-lg transition-colors "+(i?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:text-primary-600 hover:bg-gray-100 dark:hover:bg-gray-700"),title:"Change Role",children:e.jsx(o,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(e=>{T(e),q(""),F(!0)})(s),disabled:i,className:"p-2 rounded-lg transition-colors "+(i?"text-gray-300 cursor-not-allowed":s.isBlocked?"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"),title:s.isBlocked?"Unblock User":"Block User",children:s.isBlocked?e.jsx(n,{className:"w-4 h-4"}):e.jsx(c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(e=>{T(e),J(!0)})(s),disabled:i,className:"p-2 rounded-lg transition-colors "+(i?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700"),title:"Delete User",children:e.jsx(p,{className:"w-4 h-4"})})]})})]},s._id);var x})})]})})})]}),e.jsx(k,{isOpen:E,onClose:()=>{H(!1),T(null)},title:"Change User Role",size:"sm",children:O&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary-400 to-purple-500 flex items-center justify-center text-white font-bold text-2xl mx-auto mb-3",children:(null==(w=O.firstName)?void 0:w[0])||"U"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[O.firstName," ",O.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:O.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Role"}),e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("button",{onClick:()=>Y(s.value),className:"w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-all "+(Q===s.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[e.jsx(o,{className:Q===s.value?"text-primary-600":"text-gray-400"}),e.jsx("span",{className:Q===s.value?"text-primary-600 font-medium":"text-gray-600 dark:text-gray-400",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{variant:"outline",onClick:()=>H(!1),fullWidth:!0,children:"Cancel"}),e.jsx(u,{variant:"primary",onClick:()=>{O&&Q&&C(b({userId:O._id,role:Q}))},disabled:S||Q===O.role,fullWidth:!0,children:S?"Updating...":"Update Role"})]})]})}),e.jsx(k,{isOpen:P,onClose:()=>{F(!1),T(null)},title:(null==O?void 0:O.isBlocked)?"Unblock User":"Block User",size:"sm",children:O&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 "+(O.isBlocked?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:O.isBlocked?e.jsx(n,{className:"w-8 h-8 text-green-600"}):e.jsx(c,{className:"w-8 h-8 text-red-600"})}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[O.isBlocked?"Unblock":"Block"," ",O.firstName," ",O.lastName,"?"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:O.isBlocked?"This user will be able to access their account again.":"This user will not be able to access their account."})]}),!O.isBlocked&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason (optional)"}),e.jsx("textarea",{value:$,onChange:e=>q(e.target.value),placeholder:"Enter reason for blocking...",rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg resize-none"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{variant:"outline",onClick:()=>F(!1),fullWidth:!0,children:"Cancel"}),e.jsx(u,{variant:"primary",className:O.isBlocked?"":"!bg-red-600 hover:!bg-red-700",onClick:()=>{if(!O)return;const e=O.isBlocked?"unblock":"block";C(y({userId:O._id,action:e,reason:"block"===e?$:void 0}))},disabled:S,fullWidth:!0,children:S?"Processing...":O.isBlocked?"Unblock User":"Block User"})]})]})}),e.jsx(k,{isOpen:G,onClose:()=>{J(!1),T(null)},title:"Delete User",size:"sm",children:O&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-red-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Delete ",O.firstName," ",O.lastName,"?"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This action cannot be undone. All user data will be permanently removed."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{variant:"outline",onClick:()=>J(!1),fullWidth:!0,children:"Cancel"}),e.jsx(u,{variant:"primary",className:"!bg-red-600 hover:!bg-red-700",onClick:()=>{O&&C(j(O._id))},disabled:S,fullWidth:!0,children:S?"Deleting...":"Delete User"})]})]})})]})};export{w as default};
